import{q as u,j as V,p as C,w as n,u as m,h as k,s as A,e as F,o as S,d,b as s,v as _,x as B,g as p}from"./vendor-BmZR9K5F.js";import{_ as E,u as c}from"./index-csEBr71G.js";import{v as D,a as N}from"./validation-BV3KGR2z.js";import{F as T,a as f}from"./FormField-CCZ-JULi.js";import"./firebase-w6XYyoFK.js";import"./mapbox-Dy2hBtBs.js";const U={class:"remember-section"},q={__name:"Login",setup(L){const r=k();A();const{login:g,loading:w,error:b,clearError:v}=c(),a=u({email:"",password:"",persistSession:!1}),t=u({email:null,password:null}),y=()=>(t.email=D(a.email),t.password=N(a.password,"Password"),!t.email&&!t.password),h=async()=>{if(v(),!!y())try{await g(a.email,a.password);const{isAuthenticated:i,isYouthUser:e,isCounsellor:l,isAdmin:o,user:x}=c();i.value&&x.value&&(e.value?await r.push({name:"StudentDashboard"}):l.value?await r.push({name:"TherapistDashboard"}):o.value?await r.push({name:"AdminControlPanel"}):await r.push({name:"MainDashboard"}))}catch{}};return V(()=>{typeof M<"u"&&setTimeout(()=>{M.updateTextFields(),M.CharacterCounter.init(document.querySelectorAll("input[data-length]"))},150)}),(i,e)=>{const l=F("router-link");return S(),C(T,{"card-title":"Welcome Back","card-subheading":"Access your MindBridge account","header-icon":"account_circle","system-notification":m(b),"operation-active":m(w),"submit-label":"Sign In","submit-icon-symbol":"login","loading-label":"Authenticating...",onSubmit:h},{footer:n(()=>[e[6]||(e[6]=s("p",null,[s("a",{href:"#",class:"teal-text"},"Forgot your password?")],-1)),s("p",null,[e[5]||(e[5]=p(" Need an account? ",-1)),d(l,{to:"/register",class:"teal-text"},{default:n(()=>[...e[4]||(e[4]=[p("Create one here",-1)])]),_:1})])]),default:n(()=>[d(f,{"element-identifier":"email","label-text":"Email Address","input-category":"email","icon-symbol":"email",modelValue:a.email,"onUpdate:modelValue":e[0]||(e[0]=o=>a.email=o),"error-message":t.email,"mandatory-field":""},null,8,["modelValue","error-message"]),d(f,{"element-identifier":"password","label-text":"Password","input-category":"password","icon-symbol":"lock",modelValue:a.password,"onUpdate:modelValue":e[1]||(e[1]=o=>a.password=o),"error-message":t.password,"mandatory-field":""},null,8,["modelValue","error-message"]),s("p",U,[s("label",null,[_(s("input",{type:"checkbox","onUpdate:modelValue":e[2]||(e[2]=o=>a.persistSession=o)},null,512),[[B,a.persistSession]]),e[3]||(e[3]=s("span",null,"Keep me signed in",-1))])])]),_:1},8,["system-notification","operation-active"])}}},Y=E(q,[["__scopeId","data-v-1cb3fc36"]]);export{Y as default};
