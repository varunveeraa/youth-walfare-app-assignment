import{r as Te,j as ni,a as Wr,b as J,i as Vr,f as ii,v as ai,E as oi,g as li,t as Yr,y as Jr,o as Gr}from"./vendor-BmZR9K5F.js";import{c as ci,g as di,a as ui}from"./mapbox-Dy2hBtBs.js";import{m as Ye,n as Je}from"./firebase-w6XYyoFK.js";import{d as Ge,_ as hi}from"./index-csEBr71G.js";import{C as Ke}from"./collections-BIJkFGz0.js";var Xe={exports:{}},Ze={exports:{}};/*! Axios v1.12.2 Copyright (c) 2025 Matt Zabriskie and contributors */var Rt,Kr;function fi(){if(Kr)return Rt;Kr=1;function e(r,s){return function(){return r.apply(s,arguments)}}const{toString:t}=Object.prototype,{getPrototypeOf:l}=Object,{iterator:u,toStringTag:h}=Symbol,E=(r=>s=>{const n=t.call(s);return r[n]||(r[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),T=r=>(r=r.toLowerCase(),s=>E(s)===r),f=r=>s=>typeof s===r,{isArray:c}=Array,b=f("undefined");function I(r){return r!==null&&!b(r)&&r.constructor!==null&&!b(r.constructor)&&x(r.constructor.isBuffer)&&r.constructor.isBuffer(r)}const o=T("ArrayBuffer");function g(r){let s;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?s=ArrayBuffer.isView(r):s=r&&r.buffer&&o(r.buffer),s}const v=f("string"),x=f("function"),j=f("number"),B=r=>r!==null&&typeof r=="object",R=r=>r===!0||r===!1,N=r=>{if(E(r)!=="object")return!1;const s=l(r);return(s===null||s===Object.prototype||Object.getPrototypeOf(s)===null)&&!(h in r)&&!(u in r)},M=r=>{if(!B(r)||I(r))return!1;try{return Object.keys(r).length===0&&Object.getPrototypeOf(r)===Object.prototype}catch{return!1}},F=T("Date"),_=T("File"),le=T("Blob"),ue=T("FileList"),he=r=>B(r)&&x(r.pipe),ye=r=>{let s;return r&&(typeof FormData=="function"&&r instanceof FormData||x(r.append)&&((s=E(r))==="formdata"||s==="object"&&x(r.toString)&&r.toString()==="[object FormData]"))},be=T("URLSearchParams"),[Ee,we,q,Ce]=["ReadableStream","Request","Response","Headers"].map(T),it=r=>r.trim?r.trim():r.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function fe(r,s,{allOwnKeys:n=!1}={}){if(r===null||typeof r>"u")return;let i,a;if(typeof r!="object"&&(r=[r]),c(r))for(i=0,a=r.length;i<a;i++)s.call(null,r[i],i,r);else{if(I(r))return;const p=n?Object.getOwnPropertyNames(r):Object.keys(r),d=p.length;let y;for(i=0;i<d;i++)y=p[i],s.call(null,r[y],y,r)}}function Me(r,s){if(I(r))return null;s=s.toLowerCase();const n=Object.keys(r);let i=n.length,a;for(;i-- >0;)if(a=n[i],s===a.toLowerCase())return a;return null}const ne=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:ci,ke=r=>!b(r)&&r!==ne;function De(){const{caseless:r,skipUndefined:s}=ke(this)&&this||{},n={},i=(a,p)=>{const d=r&&Me(n,p)||p;N(n[d])&&N(a)?n[d]=De(n[d],a):N(a)?n[d]=De({},a):c(a)?n[d]=a.slice():(!s||!b(a))&&(n[d]=a)};for(let a=0,p=arguments.length;a<p;a++)arguments[a]&&fe(arguments[a],i);return n}const at=(r,s,n,{allOwnKeys:i}={})=>(fe(s,(a,p)=>{n&&x(a)?r[p]=e(a,n):r[p]=a},{allOwnKeys:i}),r),ot=r=>(r.charCodeAt(0)===65279&&(r=r.slice(1)),r),lt=(r,s,n,i)=>{r.prototype=Object.create(s.prototype,i),r.prototype.constructor=r,Object.defineProperty(r,"super",{value:s.prototype}),n&&Object.assign(r.prototype,n)},ct=(r,s,n,i)=>{let a,p,d;const y={};if(s=s||{},r==null)return s;do{for(a=Object.getOwnPropertyNames(r),p=a.length;p-- >0;)d=a[p],(!i||i(d,r,s))&&!y[d]&&(s[d]=r[d],y[d]=!0);r=n!==!1&&l(r)}while(r&&(!n||n(r,s))&&r!==Object.prototype);return s},dt=(r,s,n)=>{r=String(r),(n===void 0||n>r.length)&&(n=r.length),n-=s.length;const i=r.indexOf(s,n);return i!==-1&&i===n},Ks=r=>{if(!r)return null;if(c(r))return r;let s=r.length;if(!j(s))return null;const n=new Array(s);for(;s-- >0;)n[s]=r[s];return n},Xs=(r=>s=>r&&s instanceof r)(typeof Uint8Array<"u"&&l(Uint8Array)),Zs=(r,s)=>{const i=(r&&r[u]).call(r);let a;for(;(a=i.next())&&!a.done;){const p=a.value;s.call(r,p[0],p[1])}},Qs=(r,s)=>{let n;const i=[];for(;(n=r.exec(s))!==null;)i.push(n);return i},en=T("HTMLFormElement"),tn=r=>r.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,i,a){return i.toUpperCase()+a}),ar=(({hasOwnProperty:r})=>(s,n)=>r.call(s,n))(Object.prototype),rn=T("RegExp"),or=(r,s)=>{const n=Object.getOwnPropertyDescriptors(r),i={};fe(n,(a,p)=>{let d;(d=s(a,p,r))!==!1&&(i[p]=d||a)}),Object.defineProperties(r,i)},sn=r=>{or(r,(s,n)=>{if(x(r)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const i=r[n];if(x(i)){if(s.enumerable=!1,"writable"in s){s.writable=!1;return}s.set||(s.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},nn=(r,s)=>{const n={},i=a=>{a.forEach(p=>{n[p]=!0})};return c(r)?i(r):i(String(r).split(s)),n},an=()=>{},on=(r,s)=>r!=null&&Number.isFinite(r=+r)?r:s;function ln(r){return!!(r&&x(r.append)&&r[h]==="FormData"&&r[u])}const cn=r=>{const s=new Array(10),n=(i,a)=>{if(B(i)){if(s.indexOf(i)>=0)return;if(I(i))return i;if(!("toJSON"in i)){s[a]=i;const p=c(i)?[]:{};return fe(i,(d,y)=>{const C=n(d,a+1);!b(C)&&(p[y]=C)}),s[a]=void 0,p}}return i};return n(r,0)},dn=T("AsyncFunction"),un=r=>r&&(B(r)||x(r))&&x(r.then)&&x(r.catch),lr=((r,s)=>r?setImmediate:s?((n,i)=>(ne.addEventListener("message",({source:a,data:p})=>{a===ne&&p===n&&i.length&&i.shift()()},!1),a=>{i.push(a),ne.postMessage(n,"*")}))(`axios@${Math.random()}`,[]):n=>setTimeout(n))(typeof setImmediate=="function",x(ne.postMessage)),hn=typeof queueMicrotask<"u"?queueMicrotask.bind(ne):typeof process<"u"&&process.nextTick||lr;var m={isArray:c,isArrayBuffer:o,isBuffer:I,isFormData:ye,isArrayBufferView:g,isString:v,isNumber:j,isBoolean:R,isObject:B,isPlainObject:N,isEmptyObject:M,isReadableStream:Ee,isRequest:we,isResponse:q,isHeaders:Ce,isUndefined:b,isDate:F,isFile:_,isBlob:le,isRegExp:rn,isFunction:x,isStream:he,isURLSearchParams:be,isTypedArray:Xs,isFileList:ue,forEach:fe,merge:De,extend:at,trim:it,stripBOM:ot,inherits:lt,toFlatObject:ct,kindOf:E,kindOfTest:T,endsWith:dt,toArray:Ks,forEachEntry:Zs,matchAll:Qs,isHTMLForm:en,hasOwnProperty:ar,hasOwnProp:ar,reduceDescriptors:or,freezeMethods:sn,toObjectSet:nn,toCamelCase:tn,noop:an,toFiniteNumber:on,findKey:Me,global:ne,isContextDefined:ke,isSpecCompliantForm:ln,toJSONObject:cn,isAsyncFn:dn,isThenable:un,setImmediate:lr,asap:hn,isIterable:r=>r!=null&&x(r[u])};function k(r,s,n,i,a){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=r,this.name="AxiosError",s&&(this.code=s),n&&(this.config=n),i&&(this.request=i),a&&(this.response=a,this.status=a.status?a.status:null)}m.inherits(k,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:m.toJSONObject(this.config),code:this.code,status:this.status}}});const cr=k.prototype,dr={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(r=>{dr[r]={value:r}}),Object.defineProperties(k,dr),Object.defineProperty(cr,"isAxiosError",{value:!0}),k.from=(r,s,n,i,a,p)=>{const d=Object.create(cr);m.toFlatObject(r,d,function(w){return w!==Error.prototype},S=>S!=="isAxiosError");const y=r&&r.message?r.message:"Error",C=s==null&&r?r.code:s;return k.call(d,y,C,n,i,a),r&&d.cause==null&&Object.defineProperty(d,"cause",{value:r,configurable:!0}),d.name=r&&r.name||"Error",p&&Object.assign(d,p),d};var fn=null;function ut(r){return m.isPlainObject(r)||m.isArray(r)}function ur(r){return m.endsWith(r,"[]")?r.slice(0,-2):r}function hr(r,s,n){return r?r.concat(s).map(function(a,p){return a=ur(a),!n&&p?"["+a+"]":a}).join(n?".":""):s}function pn(r){return m.isArray(r)&&!r.some(ut)}const mn=m.toFlatObject(m,{},null,function(s){return/^is[A-Z]/.test(s)});function Ue(r,s,n){if(!m.isObject(r))throw new TypeError("target must be an object");s=s||new FormData,n=m.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(P,D){return!m.isUndefined(D[P])});const i=n.metaTokens,a=n.visitor||w,p=n.dots,d=n.indexes,C=(n.Blob||typeof Blob<"u"&&Blob)&&m.isSpecCompliantForm(s);if(!m.isFunction(a))throw new TypeError("visitor must be a function");function S(A){if(A===null)return"";if(m.isDate(A))return A.toISOString();if(m.isBoolean(A))return A.toString();if(!C&&m.isBlob(A))throw new k("Blob is not supported. Use a Buffer instead.");return m.isArrayBuffer(A)||m.isTypedArray(A)?C&&typeof Blob=="function"?new Blob([A]):Buffer.from(A):A}function w(A,P,D){let H=A;if(A&&!D&&typeof A=="object"){if(m.endsWith(P,"{}"))P=i?P:P.slice(0,-2),A=JSON.stringify(A);else if(m.isArray(A)&&pn(A)||(m.isFileList(A)||m.endsWith(P,"[]"))&&(H=m.toArray(A)))return P=ur(P),H.forEach(function($,Y){!(m.isUndefined($)||$===null)&&s.append(d===!0?hr([P],Y,p):d===null?P:P+"[]",S($))}),!1}return ut(A)?!0:(s.append(hr(D,P,p),S(A)),!1)}const O=[],L=Object.assign(mn,{defaultVisitor:w,convertValue:S,isVisitable:ut});function V(A,P){if(!m.isUndefined(A)){if(O.indexOf(A)!==-1)throw Error("Circular reference detected in "+P.join("."));O.push(A),m.forEach(A,function(H,G){(!(m.isUndefined(H)||H===null)&&a.call(s,H,m.isString(G)?G.trim():G,P,L))===!0&&V(H,P?P.concat(G):[G])}),O.pop()}}if(!m.isObject(r))throw new TypeError("data must be an object");return V(r),s}function fr(r){const s={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(r).replace(/[!'()~]|%20|%00/g,function(i){return s[i]})}function ht(r,s){this._pairs=[],r&&Ue(r,this,s)}const pr=ht.prototype;pr.append=function(s,n){this._pairs.push([s,n])},pr.toString=function(s){const n=s?function(i){return s.call(this,i,fr)}:fr;return this._pairs.map(function(a){return n(a[0])+"="+n(a[1])},"").join("&")};function gn(r){return encodeURIComponent(r).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function mr(r,s,n){if(!s)return r;const i=n&&n.encode||gn;m.isFunction(n)&&(n={serialize:n});const a=n&&n.serialize;let p;if(a?p=a(s,n):p=m.isURLSearchParams(s)?s.toString():new ht(s,n).toString(i),p){const d=r.indexOf("#");d!==-1&&(r=r.slice(0,d)),r+=(r.indexOf("?")===-1?"?":"&")+p}return r}class yn{constructor(){this.handlers=[]}use(s,n,i){return this.handlers.push({fulfilled:s,rejected:n,synchronous:i?i.synchronous:!1,runWhen:i?i.runWhen:null}),this.handlers.length-1}eject(s){this.handlers[s]&&(this.handlers[s]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(s){m.forEach(this.handlers,function(i){i!==null&&s(i)})}}var gr=yn,yr={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},bn=typeof URLSearchParams<"u"?URLSearchParams:ht,En=typeof FormData<"u"?FormData:null,wn=typeof Blob<"u"?Blob:null,An={isBrowser:!0,classes:{URLSearchParams:bn,FormData:En,Blob:wn},protocols:["http","https","file","blob","url","data"]};const ft=typeof window<"u"&&typeof document<"u",pt=typeof navigator=="object"&&navigator||void 0,Sn=ft&&(!pt||["ReactNative","NativeScript","NS"].indexOf(pt.product)<0),vn=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",Tn=ft&&window.location.href||"http://localhost";var Rn=Object.freeze({__proto__:null,hasBrowserEnv:ft,hasStandardBrowserWebWorkerEnv:vn,hasStandardBrowserEnv:Sn,navigator:pt,origin:Tn}),W={...Rn,...An};function Cn(r,s){return Ue(r,new W.classes.URLSearchParams,{visitor:function(n,i,a,p){return W.isNode&&m.isBuffer(n)?(this.append(i,n.toString("base64")),!1):p.defaultVisitor.apply(this,arguments)},...s})}function Dn(r){return m.matchAll(/\w+|\[(\w*)]/g,r).map(s=>s[0]==="[]"?"":s[1]||s[0])}function On(r){const s={},n=Object.keys(r);let i;const a=n.length;let p;for(i=0;i<a;i++)p=n[i],s[p]=r[p];return s}function br(r){function s(n,i,a,p){let d=n[p++];if(d==="__proto__")return!0;const y=Number.isFinite(+d),C=p>=n.length;return d=!d&&m.isArray(a)?a.length:d,C?(m.hasOwnProp(a,d)?a[d]=[a[d],i]:a[d]=i,!y):((!a[d]||!m.isObject(a[d]))&&(a[d]=[]),s(n,i,a[d],p)&&m.isArray(a[d])&&(a[d]=On(a[d])),!y)}if(m.isFormData(r)&&m.isFunction(r.entries)){const n={};return m.forEachEntry(r,(i,a)=>{s(Dn(i),a,n,0)}),n}return null}function xn(r,s,n){if(m.isString(r))try{return(s||JSON.parse)(r),m.trim(r)}catch(i){if(i.name!=="SyntaxError")throw i}return(n||JSON.stringify)(r)}const mt={transitional:yr,adapter:["xhr","http","fetch"],transformRequest:[function(s,n){const i=n.getContentType()||"",a=i.indexOf("application/json")>-1,p=m.isObject(s);if(p&&m.isHTMLForm(s)&&(s=new FormData(s)),m.isFormData(s))return a?JSON.stringify(br(s)):s;if(m.isArrayBuffer(s)||m.isBuffer(s)||m.isStream(s)||m.isFile(s)||m.isBlob(s)||m.isReadableStream(s))return s;if(m.isArrayBufferView(s))return s.buffer;if(m.isURLSearchParams(s))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),s.toString();let y;if(p){if(i.indexOf("application/x-www-form-urlencoded")>-1)return Cn(s,this.formSerializer).toString();if((y=m.isFileList(s))||i.indexOf("multipart/form-data")>-1){const C=this.env&&this.env.FormData;return Ue(y?{"files[]":s}:s,C&&new C,this.formSerializer)}}return p||a?(n.setContentType("application/json",!1),xn(s)):s}],transformResponse:[function(s){const n=this.transitional||mt.transitional,i=n&&n.forcedJSONParsing,a=this.responseType==="json";if(m.isResponse(s)||m.isReadableStream(s))return s;if(s&&m.isString(s)&&(i&&!this.responseType||a)){const d=!(n&&n.silentJSONParsing)&&a;try{return JSON.parse(s,this.parseReviver)}catch(y){if(d)throw y.name==="SyntaxError"?k.from(y,k.ERR_BAD_RESPONSE,this,null,this.response):y}}return s}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:W.classes.FormData,Blob:W.classes.Blob},validateStatus:function(s){return s>=200&&s<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};m.forEach(["delete","get","head","post","put","patch"],r=>{mt.headers[r]={}});var gt=mt;const Nn=m.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]);var In=r=>{const s={};let n,i,a;return r&&r.split(`
`).forEach(function(d){a=d.indexOf(":"),n=d.substring(0,a).trim().toLowerCase(),i=d.substring(a+1).trim(),!(!n||s[n]&&Nn[n])&&(n==="set-cookie"?s[n]?s[n].push(i):s[n]=[i]:s[n]=s[n]?s[n]+", "+i:i)}),s};const Er=Symbol("internals");function Oe(r){return r&&String(r).trim().toLowerCase()}function je(r){return r===!1||r==null?r:m.isArray(r)?r.map(je):String(r)}function Pn(r){const s=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let i;for(;i=n.exec(r);)s[i[1]]=i[2];return s}const Mn=r=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(r.trim());function yt(r,s,n,i,a){if(m.isFunction(i))return i.call(this,s,n);if(a&&(s=n),!!m.isString(s)){if(m.isString(i))return s.indexOf(i)!==-1;if(m.isRegExp(i))return i.test(s)}}function kn(r){return r.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(s,n,i)=>n.toUpperCase()+i)}function Un(r,s){const n=m.toCamelCase(" "+s);["get","set","has"].forEach(i=>{Object.defineProperty(r,i+n,{value:function(a,p,d){return this[i].call(this,s,a,p,d)},configurable:!0})})}class Le{constructor(s){s&&this.set(s)}set(s,n,i){const a=this;function p(y,C,S){const w=Oe(C);if(!w)throw new Error("header name must be a non-empty string");const O=m.findKey(a,w);(!O||a[O]===void 0||S===!0||S===void 0&&a[O]!==!1)&&(a[O||C]=je(y))}const d=(y,C)=>m.forEach(y,(S,w)=>p(S,w,C));if(m.isPlainObject(s)||s instanceof this.constructor)d(s,n);else if(m.isString(s)&&(s=s.trim())&&!Mn(s))d(In(s),n);else if(m.isObject(s)&&m.isIterable(s)){let y={},C,S;for(const w of s){if(!m.isArray(w))throw TypeError("Object iterator must return a key-value pair");y[S=w[0]]=(C=y[S])?m.isArray(C)?[...C,w[1]]:[C,w[1]]:w[1]}d(y,n)}else s!=null&&p(n,s,i);return this}get(s,n){if(s=Oe(s),s){const i=m.findKey(this,s);if(i){const a=this[i];if(!n)return a;if(n===!0)return Pn(a);if(m.isFunction(n))return n.call(this,a,i);if(m.isRegExp(n))return n.exec(a);throw new TypeError("parser must be boolean|regexp|function")}}}has(s,n){if(s=Oe(s),s){const i=m.findKey(this,s);return!!(i&&this[i]!==void 0&&(!n||yt(this,this[i],i,n)))}return!1}delete(s,n){const i=this;let a=!1;function p(d){if(d=Oe(d),d){const y=m.findKey(i,d);y&&(!n||yt(i,i[y],y,n))&&(delete i[y],a=!0)}}return m.isArray(s)?s.forEach(p):p(s),a}clear(s){const n=Object.keys(this);let i=n.length,a=!1;for(;i--;){const p=n[i];(!s||yt(this,this[p],p,s,!0))&&(delete this[p],a=!0)}return a}normalize(s){const n=this,i={};return m.forEach(this,(a,p)=>{const d=m.findKey(i,p);if(d){n[d]=je(a),delete n[p];return}const y=s?kn(p):String(p).trim();y!==p&&delete n[p],n[y]=je(a),i[y]=!0}),this}concat(...s){return this.constructor.concat(this,...s)}toJSON(s){const n=Object.create(null);return m.forEach(this,(i,a)=>{i!=null&&i!==!1&&(n[a]=s&&m.isArray(i)?i.join(", "):i)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([s,n])=>s+": "+n).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(s){return s instanceof this?s:new this(s)}static concat(s,...n){const i=new this(s);return n.forEach(a=>i.set(a)),i}static accessor(s){const i=(this[Er]=this[Er]={accessors:{}}).accessors,a=this.prototype;function p(d){const y=Oe(d);i[y]||(Un(a,d),i[y]=!0)}return m.isArray(s)?s.forEach(p):p(s),this}}Le.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),m.reduceDescriptors(Le.prototype,({value:r},s)=>{let n=s[0].toUpperCase()+s.slice(1);return{get:()=>r,set(i){this[n]=i}}}),m.freezeMethods(Le);var Q=Le;function bt(r,s){const n=this||gt,i=s||n,a=Q.from(i.headers);let p=i.data;return m.forEach(r,function(y){p=y.call(n,p,a.normalize(),s?s.status:void 0)}),a.normalize(),p}function wr(r){return!!(r&&r.__CANCEL__)}function Ae(r,s,n){k.call(this,r??"canceled",k.ERR_CANCELED,s,n),this.name="CanceledError"}m.inherits(Ae,k,{__CANCEL__:!0});function Ar(r,s,n){const i=n.config.validateStatus;!n.status||!i||i(n.status)?r(n):s(new k("Request failed with status code "+n.status,[k.ERR_BAD_REQUEST,k.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}function jn(r){const s=/^([-+\w]{1,25})(:?\/\/|:)/.exec(r);return s&&s[1]||""}function Ln(r,s){r=r||10;const n=new Array(r),i=new Array(r);let a=0,p=0,d;return s=s!==void 0?s:1e3,function(C){const S=Date.now(),w=i[p];d||(d=S),n[a]=C,i[a]=S;let O=p,L=0;for(;O!==a;)L+=n[O++],O=O%r;if(a=(a+1)%r,a===p&&(p=(p+1)%r),S-d<s)return;const V=w&&S-w;return V?Math.round(L*1e3/V):void 0}}function _n(r,s){let n=0,i=1e3/s,a,p;const d=(S,w=Date.now())=>{n=w,a=null,p&&(clearTimeout(p),p=null),r(...S)};return[(...S)=>{const w=Date.now(),O=w-n;O>=i?d(S,w):(a=S,p||(p=setTimeout(()=>{p=null,d(a)},i-O)))},()=>a&&d(a)]}const _e=(r,s,n=3)=>{let i=0;const a=Ln(50,250);return _n(p=>{const d=p.loaded,y=p.lengthComputable?p.total:void 0,C=d-i,S=a(C),w=d<=y;i=d;const O={loaded:d,total:y,progress:y?d/y:void 0,bytes:C,rate:S||void 0,estimated:S&&y&&w?(y-d)/S:void 0,event:p,lengthComputable:y!=null,[s?"download":"upload"]:!0};r(O)},n)},Sr=(r,s)=>{const n=r!=null;return[i=>s[0]({lengthComputable:n,total:r,loaded:i}),s[1]]},vr=r=>(...s)=>m.asap(()=>r(...s));var Bn=W.hasStandardBrowserEnv?((r,s)=>n=>(n=new URL(n,W.origin),r.protocol===n.protocol&&r.host===n.host&&(s||r.port===n.port)))(new URL(W.origin),W.navigator&&/(msie|trident)/i.test(W.navigator.userAgent)):()=>!0,Fn=W.hasStandardBrowserEnv?{write(r,s,n,i,a,p){const d=[r+"="+encodeURIComponent(s)];m.isNumber(n)&&d.push("expires="+new Date(n).toGMTString()),m.isString(i)&&d.push("path="+i),m.isString(a)&&d.push("domain="+a),p===!0&&d.push("secure"),document.cookie=d.join("; ")},read(r){const s=document.cookie.match(new RegExp("(^|;\\s*)("+r+")=([^;]*)"));return s?decodeURIComponent(s[3]):null},remove(r){this.write(r,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function qn(r){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(r)}function zn(r,s){return s?r.replace(/\/?\/$/,"")+"/"+s.replace(/^\/+/,""):r}function Tr(r,s,n){let i=!qn(s);return r&&(i||n==!1)?zn(r,s):s}const Rr=r=>r instanceof Q?{...r}:r;function pe(r,s){s=s||{};const n={};function i(S,w,O,L){return m.isPlainObject(S)&&m.isPlainObject(w)?m.merge.call({caseless:L},S,w):m.isPlainObject(w)?m.merge({},w):m.isArray(w)?w.slice():w}function a(S,w,O,L){if(m.isUndefined(w)){if(!m.isUndefined(S))return i(void 0,S,O,L)}else return i(S,w,O,L)}function p(S,w){if(!m.isUndefined(w))return i(void 0,w)}function d(S,w){if(m.isUndefined(w)){if(!m.isUndefined(S))return i(void 0,S)}else return i(void 0,w)}function y(S,w,O){if(O in s)return i(S,w);if(O in r)return i(void 0,S)}const C={url:p,method:p,data:p,baseURL:d,transformRequest:d,transformResponse:d,paramsSerializer:d,timeout:d,timeoutMessage:d,withCredentials:d,withXSRFToken:d,adapter:d,responseType:d,xsrfCookieName:d,xsrfHeaderName:d,onUploadProgress:d,onDownloadProgress:d,decompress:d,maxContentLength:d,maxBodyLength:d,beforeRedirect:d,transport:d,httpAgent:d,httpsAgent:d,cancelToken:d,socketPath:d,responseEncoding:d,validateStatus:y,headers:(S,w,O)=>a(Rr(S),Rr(w),O,!0)};return m.forEach(Object.keys({...r,...s}),function(w){const O=C[w]||a,L=O(r[w],s[w],w);m.isUndefined(L)&&O!==y||(n[w]=L)}),n}var Cr=r=>{const s=pe({},r);let{data:n,withXSRFToken:i,xsrfHeaderName:a,xsrfCookieName:p,headers:d,auth:y}=s;if(s.headers=d=Q.from(d),s.url=mr(Tr(s.baseURL,s.url,s.allowAbsoluteUrls),r.params,r.paramsSerializer),y&&d.set("Authorization","Basic "+btoa((y.username||"")+":"+(y.password?unescape(encodeURIComponent(y.password)):""))),m.isFormData(n)){if(W.hasStandardBrowserEnv||W.hasStandardBrowserWebWorkerEnv)d.setContentType(void 0);else if(m.isFunction(n.getHeaders)){const C=n.getHeaders(),S=["content-type","content-length"];Object.entries(C).forEach(([w,O])=>{S.includes(w.toLowerCase())&&d.set(w,O)})}}if(W.hasStandardBrowserEnv&&(i&&m.isFunction(i)&&(i=i(s)),i||i!==!1&&Bn(s.url))){const C=a&&p&&Fn.read(p);C&&d.set(a,C)}return s},Hn=typeof XMLHttpRequest<"u"&&function(r){return new Promise(function(n,i){const a=Cr(r);let p=a.data;const d=Q.from(a.headers).normalize();let{responseType:y,onUploadProgress:C,onDownloadProgress:S}=a,w,O,L,V,A;function P(){V&&V(),A&&A(),a.cancelToken&&a.cancelToken.unsubscribe(w),a.signal&&a.signal.removeEventListener("abort",w)}let D=new XMLHttpRequest;D.open(a.method.toUpperCase(),a.url,!0),D.timeout=a.timeout;function H(){if(!D)return;const $=Q.from("getAllResponseHeaders"in D&&D.getAllResponseHeaders()),ee={data:!y||y==="text"||y==="json"?D.responseText:D.response,status:D.status,statusText:D.statusText,headers:$,config:r,request:D};Ar(function(K){n(K),P()},function(K){i(K),P()},ee),D=null}"onloadend"in D?D.onloadend=H:D.onreadystatechange=function(){!D||D.readyState!==4||D.status===0&&!(D.responseURL&&D.responseURL.indexOf("file:")===0)||setTimeout(H)},D.onabort=function(){D&&(i(new k("Request aborted",k.ECONNABORTED,r,D)),D=null)},D.onerror=function(Y){const ee=Y&&Y.message?Y.message:"Network Error",me=new k(ee,k.ERR_NETWORK,r,D);me.event=Y||null,i(me),D=null},D.ontimeout=function(){let Y=a.timeout?"timeout of "+a.timeout+"ms exceeded":"timeout exceeded";const ee=a.transitional||yr;a.timeoutErrorMessage&&(Y=a.timeoutErrorMessage),i(new k(Y,ee.clarifyTimeoutError?k.ETIMEDOUT:k.ECONNABORTED,r,D)),D=null},p===void 0&&d.setContentType(null),"setRequestHeader"in D&&m.forEach(d.toJSON(),function(Y,ee){D.setRequestHeader(ee,Y)}),m.isUndefined(a.withCredentials)||(D.withCredentials=!!a.withCredentials),y&&y!=="json"&&(D.responseType=a.responseType),S&&([L,A]=_e(S,!0),D.addEventListener("progress",L)),C&&D.upload&&([O,V]=_e(C),D.upload.addEventListener("progress",O),D.upload.addEventListener("loadend",V)),(a.cancelToken||a.signal)&&(w=$=>{D&&(i(!$||$.type?new Ae(null,r,D):$),D.abort(),D=null)},a.cancelToken&&a.cancelToken.subscribe(w),a.signal&&(a.signal.aborted?w():a.signal.addEventListener("abort",w)));const G=jn(a.url);if(G&&W.protocols.indexOf(G)===-1){i(new k("Unsupported protocol "+G+":",k.ERR_BAD_REQUEST,r));return}D.send(p||null)})},$n=(r,s)=>{const{length:n}=r=r?r.filter(Boolean):[];if(s||n){let i=new AbortController,a;const p=function(S){if(!a){a=!0,y();const w=S instanceof Error?S:this.reason;i.abort(w instanceof k?w:new Ae(w instanceof Error?w.message:w))}};let d=s&&setTimeout(()=>{d=null,p(new k(`timeout ${s} of ms exceeded`,k.ETIMEDOUT))},s);const y=()=>{r&&(d&&clearTimeout(d),d=null,r.forEach(S=>{S.unsubscribe?S.unsubscribe(p):S.removeEventListener("abort",p)}),r=null)};r.forEach(S=>S.addEventListener("abort",p));const{signal:C}=i;return C.unsubscribe=()=>m.asap(y),C}};const Wn=function*(r,s){let n=r.byteLength;if(n<s){yield r;return}let i=0,a;for(;i<n;)a=i+s,yield r.slice(i,a),i=a},Vn=async function*(r,s){for await(const n of Yn(r))yield*Wn(n,s)},Yn=async function*(r){if(r[Symbol.asyncIterator]){yield*r;return}const s=r.getReader();try{for(;;){const{done:n,value:i}=await s.read();if(n)break;yield i}}finally{await s.cancel()}},Dr=(r,s,n,i)=>{const a=Vn(r,s);let p=0,d,y=C=>{d||(d=!0,i&&i(C))};return new ReadableStream({async pull(C){try{const{done:S,value:w}=await a.next();if(S){y(),C.close();return}let O=w.byteLength;if(n){let L=p+=O;n(L)}C.enqueue(new Uint8Array(w))}catch(S){throw y(S),S}},cancel(C){return y(C),a.return()}},{highWaterMark:2})},Or=64*1024,{isFunction:Be}=m,Jn=(({Request:r,Response:s})=>({Request:r,Response:s}))(m.global),{ReadableStream:xr,TextEncoder:Nr}=m.global,Ir=(r,...s)=>{try{return!!r(...s)}catch{return!1}},Gn=r=>{r=m.merge.call({skipUndefined:!0},Jn,r);const{fetch:s,Request:n,Response:i}=r,a=s?Be(s):typeof fetch=="function",p=Be(n),d=Be(i);if(!a)return!1;const y=a&&Be(xr),C=a&&(typeof Nr=="function"?(A=>P=>A.encode(P))(new Nr):async A=>new Uint8Array(await new n(A).arrayBuffer())),S=p&&y&&Ir(()=>{let A=!1;const P=new n(W.origin,{body:new xr,method:"POST",get duplex(){return A=!0,"half"}}).headers.has("Content-Type");return A&&!P}),w=d&&y&&Ir(()=>m.isReadableStream(new i("").body)),O={stream:w&&(A=>A.body)};a&&["text","arrayBuffer","blob","formData","stream"].forEach(A=>{!O[A]&&(O[A]=(P,D)=>{let H=P&&P[A];if(H)return H.call(P);throw new k(`Response type '${A}' is not supported`,k.ERR_NOT_SUPPORT,D)})});const L=async A=>{if(A==null)return 0;if(m.isBlob(A))return A.size;if(m.isSpecCompliantForm(A))return(await new n(W.origin,{method:"POST",body:A}).arrayBuffer()).byteLength;if(m.isArrayBufferView(A)||m.isArrayBuffer(A))return A.byteLength;if(m.isURLSearchParams(A)&&(A=A+""),m.isString(A))return(await C(A)).byteLength},V=async(A,P)=>{const D=m.toFiniteNumber(A.getContentLength());return D??L(P)};return async A=>{let{url:P,method:D,data:H,signal:G,cancelToken:$,timeout:Y,onDownloadProgress:ee,onUploadProgress:me,responseType:K,headers:vt,withCredentials:$e="same-origin",fetchOptions:Br}=Cr(A),Fr=s||fetch;K=K?(K+"").toLowerCase():"text";let We=$n([G,$&&$.toAbortSignal()],Y),xe=null;const ge=We&&We.unsubscribe&&(()=>{We.unsubscribe()});let qr;try{if(me&&S&&D!=="get"&&D!=="head"&&(qr=await V(vt,H))!==0){let de=new n(P,{method:"POST",body:H,duplex:"half"}),Se;if(m.isFormData(H)&&(Se=de.headers.get("content-type"))&&vt.setContentType(Se),de.body){const[Tt,Ve]=Sr(qr,_e(vr(me)));H=Dr(de.body,Or,Tt,Ve)}}m.isString($e)||($e=$e?"include":"omit");const se=p&&"credentials"in n.prototype,zr={...Br,signal:We,method:D.toUpperCase(),headers:vt.normalize().toJSON(),body:H,duplex:"half",credentials:se?$e:void 0};xe=p&&new n(P,zr);let ce=await(p?Fr(xe,Br):Fr(P,zr));const Hr=w&&(K==="stream"||K==="response");if(w&&(ee||Hr&&ge)){const de={};["status","statusText","headers"].forEach($r=>{de[$r]=ce[$r]});const Se=m.toFiniteNumber(ce.headers.get("content-length")),[Tt,Ve]=ee&&Sr(Se,_e(vr(ee),!0))||[];ce=new i(Dr(ce.body,Or,Tt,()=>{Ve&&Ve(),ge&&ge()}),de)}K=K||"text";let si=await O[m.findKey(O,K)||"text"](ce,A);return!Hr&&ge&&ge(),await new Promise((de,Se)=>{Ar(de,Se,{data:si,headers:Q.from(ce.headers),status:ce.status,statusText:ce.statusText,config:A,request:xe})})}catch(se){throw ge&&ge(),se&&se.name==="TypeError"&&/Load failed|fetch/i.test(se.message)?Object.assign(new k("Network Error",k.ERR_NETWORK,A,xe),{cause:se.cause||se}):k.from(se,se&&se.code,A,xe)}}},Kn=new Map,Pr=r=>{let s=r?r.env:{};const{fetch:n,Request:i,Response:a}=s,p=[i,a,n];let d=p.length,y=d,C,S,w=Kn;for(;y--;)C=p[y],S=w.get(C),S===void 0&&w.set(C,S=y?new Map:Gn(s)),w=S;return S};Pr();const Et={http:fn,xhr:Hn,fetch:{get:Pr}};m.forEach(Et,(r,s)=>{if(r){try{Object.defineProperty(r,"name",{value:s})}catch{}Object.defineProperty(r,"adapterName",{value:s})}});const Mr=r=>`- ${r}`,Xn=r=>m.isFunction(r)||r===null||r===!1;var kr={getAdapter:(r,s)=>{r=m.isArray(r)?r:[r];const{length:n}=r;let i,a;const p={};for(let d=0;d<n;d++){i=r[d];let y;if(a=i,!Xn(i)&&(a=Et[(y=String(i)).toLowerCase()],a===void 0))throw new k(`Unknown adapter '${y}'`);if(a&&(m.isFunction(a)||(a=a.get(s))))break;p[y||"#"+d]=a}if(!a){const d=Object.entries(p).map(([C,S])=>`adapter ${C} `+(S===!1?"is not supported by the environment":"is not available in the build"));let y=n?d.length>1?`since :
`+d.map(Mr).join(`
`):" "+Mr(d[0]):"as no adapter specified";throw new k("There is no suitable adapter to dispatch the request "+y,"ERR_NOT_SUPPORT")}return a},adapters:Et};function wt(r){if(r.cancelToken&&r.cancelToken.throwIfRequested(),r.signal&&r.signal.aborted)throw new Ae(null,r)}function Ur(r){return wt(r),r.headers=Q.from(r.headers),r.data=bt.call(r,r.transformRequest),["post","put","patch"].indexOf(r.method)!==-1&&r.headers.setContentType("application/x-www-form-urlencoded",!1),kr.getAdapter(r.adapter||gt.adapter,r)(r).then(function(i){return wt(r),i.data=bt.call(r,r.transformResponse,i),i.headers=Q.from(i.headers),i},function(i){return wr(i)||(wt(r),i&&i.response&&(i.response.data=bt.call(r,r.transformResponse,i.response),i.response.headers=Q.from(i.response.headers))),Promise.reject(i)})}const jr="1.12.2",Fe={};["object","boolean","number","function","string","symbol"].forEach((r,s)=>{Fe[r]=function(i){return typeof i===r||"a"+(s<1?"n ":" ")+r}});const Lr={};Fe.transitional=function(s,n,i){function a(p,d){return"[Axios v"+jr+"] Transitional option '"+p+"'"+d+(i?". "+i:"")}return(p,d,y)=>{if(s===!1)throw new k(a(d," has been removed"+(n?" in "+n:"")),k.ERR_DEPRECATED);return n&&!Lr[d]&&(Lr[d]=!0,console.warn(a(d," has been deprecated since v"+n+" and will be removed in the near future"))),s?s(p,d,y):!0}},Fe.spelling=function(s){return(n,i)=>(console.warn(`${i} is likely a misspelling of ${s}`),!0)};function Zn(r,s,n){if(typeof r!="object")throw new k("options must be an object",k.ERR_BAD_OPTION_VALUE);const i=Object.keys(r);let a=i.length;for(;a-- >0;){const p=i[a],d=s[p];if(d){const y=r[p],C=y===void 0||d(y,p,r);if(C!==!0)throw new k("option "+p+" must be "+C,k.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new k("Unknown option "+p,k.ERR_BAD_OPTION)}}var qe={assertOptions:Zn,validators:Fe};const re=qe.validators;class ze{constructor(s){this.defaults=s||{},this.interceptors={request:new gr,response:new gr}}async request(s,n){try{return await this._request(s,n)}catch(i){if(i instanceof Error){let a={};Error.captureStackTrace?Error.captureStackTrace(a):a=new Error;const p=a.stack?a.stack.replace(/^.+\n/,""):"";try{i.stack?p&&!String(i.stack).endsWith(p.replace(/^.+\n.+\n/,""))&&(i.stack+=`
`+p):i.stack=p}catch{}}throw i}}_request(s,n){typeof s=="string"?(n=n||{},n.url=s):n=s||{},n=pe(this.defaults,n);const{transitional:i,paramsSerializer:a,headers:p}=n;i!==void 0&&qe.assertOptions(i,{silentJSONParsing:re.transitional(re.boolean),forcedJSONParsing:re.transitional(re.boolean),clarifyTimeoutError:re.transitional(re.boolean)},!1),a!=null&&(m.isFunction(a)?n.paramsSerializer={serialize:a}:qe.assertOptions(a,{encode:re.function,serialize:re.function},!0)),n.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?n.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:n.allowAbsoluteUrls=!0),qe.assertOptions(n,{baseUrl:re.spelling("baseURL"),withXsrfToken:re.spelling("withXSRFToken")},!0),n.method=(n.method||this.defaults.method||"get").toLowerCase();let d=p&&m.merge(p.common,p[n.method]);p&&m.forEach(["delete","get","head","post","put","patch","common"],A=>{delete p[A]}),n.headers=Q.concat(d,p);const y=[];let C=!0;this.interceptors.request.forEach(function(P){typeof P.runWhen=="function"&&P.runWhen(n)===!1||(C=C&&P.synchronous,y.unshift(P.fulfilled,P.rejected))});const S=[];this.interceptors.response.forEach(function(P){S.push(P.fulfilled,P.rejected)});let w,O=0,L;if(!C){const A=[Ur.bind(this),void 0];for(A.unshift(...y),A.push(...S),L=A.length,w=Promise.resolve(n);O<L;)w=w.then(A[O++],A[O++]);return w}L=y.length;let V=n;for(;O<L;){const A=y[O++],P=y[O++];try{V=A(V)}catch(D){P.call(this,D);break}}try{w=Ur.call(this,V)}catch(A){return Promise.reject(A)}for(O=0,L=S.length;O<L;)w=w.then(S[O++],S[O++]);return w}getUri(s){s=pe(this.defaults,s);const n=Tr(s.baseURL,s.url,s.allowAbsoluteUrls);return mr(n,s.params,s.paramsSerializer)}}m.forEach(["delete","get","head","options"],function(s){ze.prototype[s]=function(n,i){return this.request(pe(i||{},{method:s,url:n,data:(i||{}).data}))}}),m.forEach(["post","put","patch"],function(s){function n(i){return function(p,d,y){return this.request(pe(y||{},{method:s,headers:i?{"Content-Type":"multipart/form-data"}:{},url:p,data:d}))}}ze.prototype[s]=n(),ze.prototype[s+"Form"]=n(!0)});var He=ze;class At{constructor(s){if(typeof s!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(p){n=p});const i=this;this.promise.then(a=>{if(!i._listeners)return;let p=i._listeners.length;for(;p-- >0;)i._listeners[p](a);i._listeners=null}),this.promise.then=a=>{let p;const d=new Promise(y=>{i.subscribe(y),p=y}).then(a);return d.cancel=function(){i.unsubscribe(p)},d},s(function(p,d,y){i.reason||(i.reason=new Ae(p,d,y),n(i.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(s){if(this.reason){s(this.reason);return}this._listeners?this._listeners.push(s):this._listeners=[s]}unsubscribe(s){if(!this._listeners)return;const n=this._listeners.indexOf(s);n!==-1&&this._listeners.splice(n,1)}toAbortSignal(){const s=new AbortController,n=i=>{s.abort(i)};return this.subscribe(n),s.signal.unsubscribe=()=>this.unsubscribe(n),s.signal}static source(){let s;return{token:new At(function(a){s=a}),cancel:s}}}var Qn=At;function ei(r){return function(n){return r.apply(null,n)}}function ti(r){return m.isObject(r)&&r.isAxiosError===!0}const St={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(St).forEach(([r,s])=>{St[s]=r});var ri=St;function _r(r){const s=new He(r),n=e(He.prototype.request,s);return m.extend(n,He.prototype,s,{allOwnKeys:!0}),m.extend(n,s,null,{allOwnKeys:!0}),n.create=function(a){return _r(pe(r,a))},n}const z=_r(gt);return z.Axios=He,z.CanceledError=Ae,z.CancelToken=Qn,z.isCancel=wr,z.VERSION=jr,z.toFormData=Ue,z.AxiosError=k,z.Cancel=z.CanceledError,z.all=function(s){return Promise.all(s)},z.spread=ei,z.isAxiosError=ti,z.mergeConfig=pe,z.AxiosHeaders=Q,z.formToJSON=r=>br(m.isHTMLForm(r)?new FormData(r):r),z.getAdapter=kr.getAdapter,z.HttpStatusCode=ri,z.default=z,Rt=z,Rt}const pi="8.1.6",mi={version:pi};var Ct,Xr;function sr(){return Xr||(Xr=1,Ct=function e(t,l,u){if(typeof t!="object"||t===null)throw new Error("Non object passed to convertKeys: "+t);if(Array.isArray(t))return t;Array.isArray(u)||(u=[]);for(const h in t)if(t.hasOwnProperty(h)){const E=l(h);typeof t[h]=="object"&&t[h]!==null&&!u.includes(h)&&!u.includes(E)&&(t[h]=e(t[h],l,u)),E!==h&&(t[E]=t[h],delete t[h])}return t}),Ct}var Dt,Zr;function gi(){return Zr||(Zr=1,Dt=function(t){if(typeof t!="string")throw new Error("String expected for conversion to snake case");return t.trim().replace(/_+|\-+/g," ").replace(/(?:^\w|[A-Z]|\b\w|\s+)/g,function(l,u){return Number(l)===0?"":u===0?l.toLowerCase():l.toUpperCase()})}),Dt}var Ot,Qr;function Ie(){if(Qr)return Ot;Qr=1;const e=sr(),t=gi();return Ot=function(u,h){return e(u,t,h)},Ot}var xt,es;function yi(){return es||(es=1,xt=function(t){if(typeof t!="string")throw new Error("String expected for conversion to snake case");return t.trim().replace(/(\s*\-*\b\w|[A-Z])/g,function(l){return l=l.trim().toLowerCase().replace("-",""),(l[0]==="_"?"":"_")+l}).slice(1)}),xt}var Nt,ts;function rt(){if(ts)return Nt;ts=1;const e=sr(),t=yi();return Nt=function(u,h){return e(u,t,h)},Nt}var It,rs;function Pe(){return rs||(rs=1,It=function(t){return JSON.parse(JSON.stringify(t))}),It}const bi={},Ei=Object.freeze(Object.defineProperty({__proto__:null,default:bi},Symbol.toStringTag,{value:"Module"})),ss=di(Ei);var Pt,ns;function wi(){if(ns)return Pt;ns=1;const e=Ie(),t=rt(),l=Pe(),u=ss,h=ss;class E{constructor(f){f&&this.fromData(f)}fromData(f){if(typeof f!="object")throw new Error("Expecting object for Mail data");f=l(f),f=e(f);const{content:c,filename:b,type:I,disposition:o,contentId:g,filePath:v}=f;if(typeof c<"u"&&typeof v<"u")throw new Error("The props 'content' and 'filePath' cannot be used together.");this.setFilename(b),this.setType(I),this.setDisposition(o),this.setContentId(g),this.setContent(v?this.readFile(v):c)}readFile(f){return u.readFileSync(h.resolve(f))}setContent(f){if(typeof f=="string"){this.content=f;return}else if(f instanceof Buffer&&f.toString!==void 0){this.content=f.toString(),this.disposition==="attachment"&&(this.content=f.toString("base64"));return}throw new Error("`content` expected to be either Buffer or string")}setFileContent(f){if(f instanceof Buffer&&f.toString!==void 0){this.content=f.toString("base64");return}throw new Error("`content` expected to be Buffer")}setFilename(f){if(!(typeof f>"u")){if(f&&typeof f!="string")throw new Error("String expected for `filename`");this.filename=f}}setType(f){if(!(typeof f>"u")){if(typeof f!="string")throw new Error("String expected for `type`");this.type=f}}setDisposition(f){if(!(typeof f>"u")){if(typeof f!="string")throw new Error("String expected for `disposition`");this.disposition=f}}setContentId(f){if(!(typeof f>"u")){if(typeof f!="string")throw new Error("String expected for `contentId`");this.contentId=f}}toJSON(){const{content:f,filename:c,type:b,disposition:I,contentId:o}=this,g={content:f,filename:c};return typeof b<"u"&&(g.type=b),typeof I<"u"&&(g.disposition=I),typeof o<"u"&&(g.contentId=o),t(g)}}return Pt=E,Pt}var Mt,is;function Ps(){return is||(is=1,Mt=function(t){if(t.indexOf("<")===-1)return["",t];let[l,u]=t.split("<");return l=l.trim(),u=u.replace(">","").trim(),[l,u]}),Mt}var kt,as;function nr(){if(as)return kt;as=1;const e=Ps();class t{constructor(u){u&&this.fromData(u)}fromData(u){if(typeof u=="string"){const[T,f]=e(u);u={name:T,email:f}}if(typeof u!="object")throw new Error("Expecting object or string for EmailAddress data");const{name:h,email:E}=u;this.setEmail(E),this.setName(h)}setName(u){if(!(typeof u>"u")){if(typeof u!="string")throw new Error("String expected for `name`");this.name=u}}setEmail(u){if(typeof u>"u")throw new Error("Must provide `email`");if(typeof u!="string")throw new Error("String expected for `email`");this.email=u}toJSON(){const{email:u,name:h}=this,E={email:u};return h!==""&&(E.name=h),E}static create(u){return Array.isArray(u)?u.filter(h=>!!h).map(h=>this.create(h)):u instanceof t?u:new t(u)}}return kt=t,kt}var Ut,os;function Ai(){if(os)return Ut;os=1;var e=function(N){return t(N)&&!l(N)};function t(R){return!!R&&typeof R=="object"}function l(R){var N=Object.prototype.toString.call(R);return N==="[object RegExp]"||N==="[object Date]"||E(R)}var u=typeof Symbol=="function"&&Symbol.for,h=u?Symbol.for("react.element"):60103;function E(R){return R.$$typeof===h}function T(R){return Array.isArray(R)?[]:{}}function f(R,N){return N.clone!==!1&&N.isMergeableObject(R)?j(T(R),R,N):R}function c(R,N,M){return R.concat(N).map(function(F){return f(F,M)})}function b(R,N){if(!N.customMerge)return j;var M=N.customMerge(R);return typeof M=="function"?M:j}function I(R){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(R).filter(function(N){return Object.propertyIsEnumerable.call(R,N)}):[]}function o(R){return Object.keys(R).concat(I(R))}function g(R,N){try{return N in R}catch{return!1}}function v(R,N){return g(R,N)&&!(Object.hasOwnProperty.call(R,N)&&Object.propertyIsEnumerable.call(R,N))}function x(R,N,M){var F={};return M.isMergeableObject(R)&&o(R).forEach(function(_){F[_]=f(R[_],M)}),o(N).forEach(function(_){v(R,_)||(g(R,_)&&M.isMergeableObject(N[_])?F[_]=b(_,M)(R[_],N[_],M):F[_]=f(N[_],M))}),F}function j(R,N,M){M=M||{},M.arrayMerge=M.arrayMerge||c,M.isMergeableObject=M.isMergeableObject||e,M.cloneUnlessOtherwiseSpecified=f;var F=Array.isArray(N),_=Array.isArray(R),le=F===_;return le?F?M.arrayMerge(R,N,M):x(R,N,M):f(N,M)}j.all=function(N,M){if(!Array.isArray(N))throw new Error("first argument should be an array");return N.reduce(function(F,_){return j(F,_,M)},{})};var B=j;return Ut=B,Ut}var jt,ls;function Ms(){return ls||(ls=1,jt=function e(t,l="{{",u="}}"){if(Array.isArray(t))return t.map(E=>e(E,l,u));const h={};for(const E in t)t.hasOwnProperty(E)&&(h[l+E+u]=String(t[E]));return h}),jt}var Lt,cs;function ks(){if(cs)return Lt;cs=1;const e=nr(),t=Ie(),l=rt(),u=Pe(),h=Ai(),E=Ms();class T{constructor(c){this.to=[],this.cc=[],this.bcc=[],this.headers={},this.customArgs={},this.substitutions={},this.substitutionWrappers=["{{","}}"],this.dynamicTemplateData={},c&&this.fromData(c)}fromData(c){if(typeof c!="object")throw new Error("Expecting object for Mail data");c=u(c),c=t(c,["substitutions","dynamicTemplateData","customArgs","headers"]);const{to:b,from:I,cc:o,bcc:g,subject:v,headers:x,customArgs:j,sendAt:B,substitutions:R,substitutionWrappers:N,dynamicTemplateData:M}=c;this.setTo(b),this.setFrom(I),this.setCc(o),this.setBcc(g),this.setSubject(v),this.setHeaders(x),this.setSubstitutions(R),this.setSubstitutionWrappers(N),this.setCustomArgs(j),this.setDynamicTemplateData(M),this.setSendAt(B)}setSubject(c){if(!(typeof c>"u")){if(typeof c!="string")throw new Error("String expected for `subject`");this.subject=c}}setSendAt(c){if(!(typeof c>"u")){if(!Number.isInteger(c))throw new Error("Integer expected for `sendAt`");this.sendAt=c}}setTo(c){typeof c>"u"||(Array.isArray(c)||(c=[c]),this.to=e.create(c))}setFrom(c){typeof c>"u"||(this.from=e.create(c))}addTo(c){typeof c>"u"||this.to.push(e.create(c))}setCc(c){typeof c>"u"||(Array.isArray(c)||(c=[c]),this.cc=e.create(c))}addCc(c){typeof c>"u"||this.cc.push(e.create(c))}setBcc(c){typeof c>"u"||(Array.isArray(c)||(c=[c]),this.bcc=e.create(c))}addBcc(c){typeof c>"u"||this.bcc.push(e.create(c))}setHeaders(c){if(!(typeof c>"u")){if(typeof c!="object"||c===null)throw new Error("Object expected for `headers`");this.headers=c}}addHeader(c,b){if(typeof c!="string")throw new Error("String expected for header key");if(typeof b!="string")throw new Error("String expected for header value");this.headers[c]=b}setCustomArgs(c){if(!(typeof c>"u")){if(typeof c!="object"||c===null)throw new Error("Object expected for `customArgs`");this.customArgs=c}}addCustomArg(c,b){if(typeof c!="string")throw new Error("String expected for custom arg key");if(typeof b!="string")throw new Error("String expected for custom arg value");this.customArgs[c]=b}setSubstitutions(c){if(!(typeof c>"u")){if(typeof c!="object")throw new Error("Object expected for `substitutions`");this.substitutions=c}}addSubstitution(c,b){if(typeof c!="string")throw new Error("String expected for substitution key");if(typeof b!="string"&&typeof b!="number")throw new Error("String or Number expected for substitution value");this.substitutions[c]=b}reverseMergeSubstitutions(c){if(!(typeof c>"u"||c===null)){if(typeof c!="object")throw new Error("Object expected for `substitutions` in reverseMergeSubstitutions");this.substitutions=Object.assign({},c,this.substitutions)}}setSubstitutionWrappers(c){if(!(typeof c>"u"||c===null)){if(!Array.isArray(c)||c.length!==2)throw new Error("Array expected with two elements for `substitutionWrappers`");this.substitutionWrappers=c}}deepMergeDynamicTemplateData(c){if(!(typeof c>"u"||c===null)){if(typeof c!="object")throw new Error("Object expected for `dynamicTemplateData` in deepMergeDynamicTemplateData");this.dynamicTemplateData=h(c,this.dynamicTemplateData)}}setDynamicTemplateData(c){if(!(typeof c>"u")){if(typeof c!="object")throw new Error("Object expected for `dynamicTemplateData`");this.dynamicTemplateData=c}}toJSON(){const{to:c,from:b,cc:I,bcc:o,subject:g,headers:v,customArgs:x,sendAt:j,substitutions:B,substitutionWrappers:R,dynamicTemplateData:N}=this,M={to:c};if(Array.isArray(I)&&I.length>0&&(M.cc=I),Array.isArray(o)&&o.length>0&&(M.bcc=o),Object.keys(v).length>0&&(M.headers=v),B&&Object.keys(B).length>0){const[F,_]=R;M.substitutions=E(B,F,_)}return Object.keys(x).length>0&&(M.customArgs=x),N&&Object.keys(N).length>0&&(M.dynamicTemplateData=N),typeof g<"u"&&(M.subject=g),typeof j<"u"&&(M.sendAt=j),typeof b<"u"&&(M.from=b),l(M,["substitutions","dynamicTemplateData","customArgs","headers"])}}return Lt=T,Lt}var _t,ds;function Us(){return ds||(ds=1,_t=function(t){return t.map(l=>typeof l=="object"&&l!==null&&typeof l.toJSON=="function"?l.toJSON():l)}),_t}var Bt,us;function Si(){return us||(us=1,Bt={DYNAMIC_TEMPLATE_CHAR_WARNING:`
Content with characters ', " or & may need to be escaped with three brackets
{{{ content }}}
See https://sendgrid.com/docs/for-developers/sending-email/using-handlebars/ for more information.`}),Bt}var Ft,hs;function vi(){if(hs)return Ft;hs=1;const e=(t,l,u,h)=>{if(!(typeof t>"u"||typeof t[u]>"u")&&typeof t[u]!==h)throw new Error(`${h} expected for \`${l}.${u}\``)};return Ft={validateMailSettings(t){if(typeof t!="object")throw new Error("Object expected for `mailSettings`");const{bcc:l,bypassListManagement:u,bypassSpamManagement:h,bypassBounceManagement:E,bypassUnsubscribeManagement:T,footer:f,sandboxMode:c,spamCheck:b}=t;e(l,"bcc","enable","boolean"),e(l,"bcc","email","string"),e(u,"bypassListManagement","enable","boolean"),e(h,"bypassSpamManagement","enable","boolean"),e(E,"bypassBounceManagement","enable","boolean"),e(T,"bypassUnsubscribeManagement","enable","boolean"),e(f,"footer","enable","boolean"),e(f,"footer","text","string"),e(f,"footer","html","string"),e(c,"sandboxMode","enable","boolean"),e(b,"spamCheck","enable","boolean"),e(b,"spamCheck","threshold","number"),e(b,"spamCheck","postToUrl","string")},validateTrackingSettings(t){if(typeof t!="object")throw new Error("Object expected for `trackingSettings`");const{clickTracking:l,openTracking:u,subscriptionTracking:h,ganalytics:E}=t;e(l,"clickTracking","enable","boolean"),e(l,"clickTracking","enableText","boolean"),e(u,"openTracking","enable","boolean"),e(u,"openTracking","substitutionTag","string"),e(h,"subscriptionTracking","enable","boolean"),e(h,"subscriptionTracking","text","string"),e(h,"subscriptionTracking","html","string"),e(h,"subscriptionTracking","substitutionTag","string"),e(E,"ganalytics","enable","boolean"),e(E,"ganalytics","utm_source","string"),e(E,"ganalytics","utm_medium","string"),e(E,"ganalytics","utm_term","string"),e(E,"ganalytics","utm_content","string"),e(E,"ganalytics","utm_campaign","string")}},Ft}var qt,fs;function Ti(){if(fs)return qt;fs=1;const e=nr(),t=ks(),l=Ie(),u=rt(),h=Pe(),E=Us(),{DYNAMIC_TEMPLATE_CHAR_WARNING:T}=Si(),{validateMailSettings:f,validateTrackingSettings:c}=vi();class b{constructor(o){this.isDynamic=!1,this.hideWarnings=!1,this.personalizations=[],this.attachments=[],this.content=[],this.categories=[],this.headers={},this.sections={},this.customArgs={},this.trackingSettings={},this.mailSettings={},this.asm={},this.substitutions=null,this.substitutionWrappers=null,this.dynamicTemplateData=null,o&&this.fromData(o)}fromData(o){if(typeof o!="object")throw new Error("Expecting object for Mail data");o=h(o),o=l(o,["substitutions","dynamicTemplateData","customArgs","headers","sections"]);const{to:g,from:v,replyTo:x,cc:j,bcc:B,sendAt:R,subject:N,text:M,html:F,content:_,templateId:le,personalizations:ue,attachments:he,ipPoolName:ye,batchId:be,sections:Ee,headers:we,categories:q,category:Ce,customArgs:it,asm:fe,mailSettings:Me,trackingSettings:ne,substitutions:ke,substitutionWrappers:De,dynamicTemplateData:at,isMultiple:ot,hideWarnings:lt,replyToList:ct}=o;this.setFrom(v),this.setReplyTo(x),this.setSubject(N),this.setSendAt(R),this.setTemplateId(le),this.setBatchId(be),this.setIpPoolName(ye),this.setAttachments(he),this.setContent(_),this.setSections(Ee),this.setHeaders(we),this.setCategories(Ce),this.setCategories(q),this.setCustomArgs(it),this.setAsm(fe),this.setMailSettings(Me),this.setTrackingSettings(ne),this.setHideWarnings(lt),this.setReplyToList(ct),this.isDynamic?this.setDynamicTemplateData(at):(this.setSubstitutions(ke),this.setSubstitutionWrappers(De)),this.addTextContent(M),this.addHtmlContent(F),ue?this.setPersonalizations(ue):ot&&Array.isArray(g)?g.forEach(dt=>this.addTo(dt,j,B)):this.addTo(g,j,B)}setFrom(o){if(this._checkProperty("from",o,[this._checkUndefined])){if(typeof o!="string"&&typeof o.email!="string")throw new Error("String or address object expected for `from`");this.from=e.create(o)}}setReplyTo(o){if(this._checkProperty("replyTo",o,[this._checkUndefined])){if(typeof o!="string"&&typeof o.email!="string")throw new Error("String or address object expected for `replyTo`");this.replyTo=e.create(o)}}setSubject(o){this._setProperty("subject",o,"string")}setSendAt(o){this._checkProperty("sendAt",o,[this._checkUndefined,this._createCheckThatThrows(Number.isInteger,"Integer expected for `sendAt`")])&&(this.sendAt=o)}setTemplateId(o){this._setProperty("templateId",o,"string")&&o.indexOf("d-")===0&&(this.isDynamic=!0)}setBatchId(o){this._setProperty("batchId",o,"string")}setIpPoolName(o){this._setProperty("ipPoolName",o,"string")}setAsm(o){if(this._checkProperty("asm",o,[this._checkUndefined,this._createTypeCheck("object")])){if(typeof o.groupId!="number")throw new Error("Expected `asm` to include an integer in its `groupId` field");if(o.groupsToDisplay&&(!Array.isArray(o.groupsToDisplay)||!o.groupsToDisplay.every(g=>typeof g=="number")))throw new Error("Array of integers expected for `asm.groupsToDisplay`");this.asm=o}}setPersonalizations(o){if(this._doArrayCheck("personalizations",o)){if(!o.every(g=>typeof g=="object"))throw new Error("Array of objects expected for `personalizations`");this.personalizations=[],o.forEach(g=>this.addPersonalization(g))}}addPersonalization(o){this.isDynamic&&o.substitutions?delete o.substitutions:!this.isDynamic&&o.dynamicTemplateData&&delete o.dynamicTemplateData,o instanceof t||(o=new t(o)),this.isDynamic?this.applyDynamicTemplateData(o):this.applySubstitutions(o),this.personalizations.push(o)}addTo(o,g,v){if(typeof o>"u"&&typeof g>"u"&&typeof v>"u")throw new Error("Provide at least one of to, cc or bcc");this.addPersonalization(new t({to:o,cc:g,bcc:v}))}setSubstitutions(o){this._setProperty("substitutions",o,"object")}setSubstitutionWrappers(o){let g=(v,x)=>{if(!Array.isArray(x)||x.length!==2)throw new Error("Array expected with two elements for `"+v+"`")};this._checkProperty("substitutionWrappers",o,[this._checkUndefined,g])&&(this.substitutionWrappers=o)}applySubstitutions(o){o instanceof t&&(o.reverseMergeSubstitutions(this.substitutions),o.setSubstitutionWrappers(this.substitutionWrappers))}applyDynamicTemplateData(o){o instanceof t&&o.deepMergeDynamicTemplateData(this.dynamicTemplateData)}setDynamicTemplateData(o){if(!(typeof o>"u")){if(typeof o!="object")throw new Error("Object expected for `dynamicTemplateData`");this.hideWarnings||Object.values(o).forEach(g=>{/['"&]/.test(g)&&console.warn(T)}),this.dynamicTemplateData=o}}setContent(o){if(this._doArrayCheck("content",o)){if(!o.every(g=>typeof g=="object"))throw new Error("Expected each entry in `content` to be an object");if(!o.every(g=>typeof g.type=="string"))throw new Error("Expected each `content` entry to contain a `type` string");if(!o.every(g=>typeof g.value=="string"))throw new Error("Expected each `content` entry to contain a `value` string");this.content=o}}addContent(o){this._checkProperty("content",o,[this._createTypeCheck("object")])&&this.content.push(o)}addTextContent(o){this._checkProperty("text",o,[this._checkUndefined,this._createTypeCheck("string")])&&this.addContent({value:o,type:"text/plain"})}addHtmlContent(o){this._checkProperty("html",o,[this._checkUndefined,this._createTypeCheck("string")])&&this.addContent({value:o,type:"text/html"})}setAttachments(o){if(this._doArrayCheck("attachments",o)){if(!o.every(g=>typeof g.content=="string"))throw new Error("Expected each attachment to contain a `content` string");if(!o.every(g=>typeof g.filename=="string"))throw new Error("Expected each attachment to contain a `filename` string");if(!o.every(g=>!g.type||typeof g.type=="string"))throw new Error("Expected the attachment's `type` field to be a string");if(!o.every(g=>!g.disposition||typeof g.disposition=="string"))throw new Error("Expected the attachment's `disposition` field to be a string");this.attachments=o}}addAttachment(o){this._checkProperty("attachment",o,[this._checkUndefined,this._createTypeCheck("object")])&&this.attachments.push(o)}setCategories(o){let g=(v,x)=>{if(!Array.isArray(x)||!x.every(j=>typeof j=="string"))throw new Error("Array of strings expected for `"+v+"`")};typeof o=="string"&&(o=[o]),this._checkProperty("categories",o,[this._checkUndefined,g])&&(this.categories=o)}addCategory(o){this._checkProperty("category",o,[this._createTypeCheck("string")])&&this.categories.push(o)}setHeaders(o){this._setProperty("headers",o,"object")}addHeader(o,g){this._checkProperty("key",o,[this._createTypeCheck("string")])&&this._checkProperty("value",g,[this._createTypeCheck("string")])&&(this.headers[o]=g)}setSections(o){this._setProperty("sections",o,"object")}setCustomArgs(o){this._setProperty("customArgs",o,"object")}setTrackingSettings(o){typeof o>"u"||(c(o),this.trackingSettings=o)}setMailSettings(o){typeof o>"u"||(f(o),this.mailSettings=o)}setHideWarnings(o){if(!(typeof o>"u")){if(typeof o!="boolean")throw new Error("Boolean expected for `hideWarnings`");this.hideWarnings=o}}toJSON(){const{from:o,replyTo:g,sendAt:v,subject:x,content:j,templateId:B,personalizations:R,attachments:N,ipPoolName:M,batchId:F,asm:_,sections:le,headers:ue,categories:he,customArgs:ye,mailSettings:be,trackingSettings:Ee,replyToList:we}=this,q={from:o,subject:x,personalizations:E(R)};return Array.isArray(N)&&N.length>0&&(q.attachments=E(N)),Array.isArray(he)&&he.length>0&&(q.categories=he.filter(Ce=>Ce!=="")),Array.isArray(j)&&j.length>0&&(q.content=E(j)),Object.keys(ue).length>0&&(q.headers=ue),Object.keys(be).length>0&&(q.mailSettings=be),Object.keys(Ee).length>0&&(q.trackingSettings=Ee),Object.keys(ye).length>0&&(q.customArgs=ye),Object.keys(le).length>0&&(q.sections=le),Object.keys(_).length>0&&(q.asm=_),typeof g<"u"&&(q.replyTo=g),typeof v<"u"&&(q.sendAt=v),typeof F<"u"&&(q.batchId=F),typeof B<"u"&&(q.templateId=B),typeof M<"u"&&(q.ipPoolName=M),typeof we<"u"&&(q.replyToList=we),u(q,["substitutions","dynamicTemplateData","customArgs","headers","sections"])}static create(o){return Array.isArray(o)?o.filter(g=>!!g).map(g=>this.create(g)):o instanceof b?o:new b(o)}_checkProperty(o,g,v){return!v.some(x=>x(o,g))}_setProperty(o,g,v){let x=this._checkProperty(o,g,[this._checkUndefined,this._createTypeCheck(v)]);return x&&(this[o]=g),x}_checkUndefined(o,g){return typeof g>"u"}_createTypeCheck(o){return(g,v)=>{if(typeof v!==o)throw new Error(o+" expected for `"+g+"`")}}_createCheckThatThrows(o,g){return(v,x)=>{if(!o(x))throw new Error(g)}}_setArrayProperty(o,g){this._doArrayCheck(o,g)&&(this[o]=g)}_doArrayCheck(o,g){return this._checkProperty(o,g,[this._checkUndefined,this._createCheckThatThrows(Array.isArray,"Array expected for`"+o+"`")])}setReplyToList(o){if(this._doArrayCheck("replyToList",o)&&o.length){if(!o.every(g=>g&&typeof g.email=="string"))throw new Error("Expected each replyTo to contain an `email` string");this.replyToList=o}}}return qt=b,qt}var zt,ps;function Ri(){if(ps)return zt;ps=1;class e{constructor(l,u,h){this.statusCode=l,this.body=u,this.headers=h}toString(){return"HTTP "+this.statusCode+" "+this.body}}return zt=e,zt}var Ht,ms;function Ci(){if(ms)return Ht;ms=1;class e extends Error{constructor(l){super();const{headers:u,status:h,statusText:E,data:T}=l;this.code=h,this.message=E,this.response={headers:u,body:T},this.stack||Error.captureStackTrace(this,this.constructor);const f=new RegExp(process.cwd()+"/","gi");this.stack=this.stack.replace(f,"")}toString(){const{body:l}=this.response;let u=`${this.message} (${this.code})`;return l&&Array.isArray(l.errors)&&l.errors.forEach(h=>{const E=h.message,T=h.field,f=h.help;u+=`
  ${E}
    ${T}
    ${f}`}),u}toJSON(){const{message:l,code:u,response:h}=this;return{message:l,code:u,response:h}}}return Ht=e,Ht}var $t,gs;function Di(){if(gs)return $t;gs=1;const e=Ie(),t=Pe(),l=["day","week","month"],u=["us","ca"],h=["desc","asc"];class E{constructor(f){this.startDate=null,this.endDate=null,this.aggregatedBy=null,f&&this.fromData(f)}fromData(f){if(typeof f!="object")throw new Error("Expecting object for Statistics data");f=t(f),f=e(f,["substitutions","customArgs"]);const{startDate:c,endDate:b,aggregatedBy:I}=f;this.setStartDate(c),this.setEndDate(b),this.setAggregatedBy(I)}setStartDate(f){if(typeof f>"u")throw new Error("Date expected for `startDate`");if(new Date(f)==="Invalid Date"||isNaN(new Date(f)))throw new Error("Date expected for `startDate`");console.log(f),this.startDate=new Date(f).toISOString().slice(0,10)}setEndDate(f){if(typeof f>"u"){this.endDate=new Date().toISOString().slice(0,10);return}if(new Date(f)==="Invalid Date"||isNaN(new Date(f)))throw new Error("Date expected for `endDate`");this.endDate=new Date(f).toISOString().slice(0,10)}setAggregatedBy(f){if(!(typeof f>"u"))if(typeof f=="string"&&l.includes(f.toLowerCase()))this.aggregatedBy=f;else throw new Error("Incorrect value for `aggregatedBy`")}getGlobal(){const{startDate:f,endDate:c,aggregatedBy:b}=this;return{startDate:f,endDate:c,aggregatedBy:b}}getAdvanced(f){const c=this.getGlobal();return typeof f>"u"||typeof f=="string"&&u.includes(f.toLowerCase())&&(c.country=f),c}getAdvancedMailboxProviders(f){const c=this.getGlobal();if(typeof f>"u")return c;if(Array.isArray(f)&&f.some(b=>typeof b!="string"))throw new Error("Array of strings expected for `mailboxProviders`");return c.mailBoxProviders=f,c}getAdvancedBrowsers(f){const c=this.getGlobal();if(typeof f>"u")return c;if(Array.isArray(f)&&f.some(b=>typeof b!="string"))throw new Error("Array of strings expected for `browsers`");return c.browsers=f,c}getCategories(f){if(typeof f>"u")throw new Error("Array of strings expected for `categories`");if(!this._isValidArrayOfStrings(f))throw new Error("Array of strings expected for `categories`");const c=this.getGlobal();return c.categories=f,c}getSubuser(f){if(typeof f>"u")throw new Error("Array of strings expected for `subusers`");if(!this._isValidArrayOfStrings(f))throw new Error("Array of strings expected for `subusers`");const c=this.getGlobal();return c.subusers=f,c}getSubuserSum(f="delivered",c=h[0],b=5,I=0){if(typeof f!="string")throw new Error("string expected for `sortByMetric`");if(!h.includes(c.toLowerCase()))throw new Error("desc or asc expected for `sortByDirection`");if(typeof b!="number")throw new Error("number expected for `limit`");if(typeof I!="number")throw new Error("number expected for `offset`");const o=this.getGlobal();return o.sortByMetric=f,o.sortByDirection=c,o.limit=b,o.offset=I,o}getSubuserMonthly(f="delivered",c=h[0],b=5,I=0){if(typeof f!="string")throw new Error("string expected for `sortByMetric`");if(!h.includes(c.toLowerCase()))throw new Error("desc or asc expected for `sortByDirection`");if(typeof b!="number")throw new Error("number expected for `limit`");if(typeof I!="number")throw new Error("number expected for `offset`");const o=this.getGlobal();return o.sortByMetric=f,o.sortByDirection=c,o.limit=b,o.offset=I,o}_isValidArrayOfStrings(f){return!(!Array.isArray(f)||f.length<1||f.some(c=>typeof c!="string"))}}return $t=E,$t}var Wt,ys;function Oi(){if(ys)return Wt;ys=1;const e=wi(),t=nr(),l=Ti(),u=ks(),h=Ri(),E=Ci(),T=Di();return Wt={Attachment:e,EmailAddress:t,Mail:l,Personalization:u,Response:h,ResponseError:E,Statistics:T},Wt}var Vt,bs;function xi(){return bs||(bs=1,Vt=function(t,l){if(typeof t!="object"||t===null)throw new Error("Not an object provided for base");if(typeof l!="object"||l===null)throw new Error("Not an object provided for data");const u=Object.assign({},t);for(const h in l)l.hasOwnProperty(h)&&(l[h]&&Array.isArray(l[h])?u[h]=l[h]:l[h]&&typeof l[h]=="object"?u[h]=Object.assign({},l[h]):l[h]&&(u[h]=l[h]));return u}),Vt}var Yt,Es;function Ni(){if(Es)return Yt;Es=1;const e=Us(),t=sr(),l=Pe(),u=xi(),h=Ps(),E=Ie(),T=rt(),f=Ms();return Yt={arrayToJSON:e,convertKeys:t,deepClone:l,mergeData:u,splitNameEmail:h,toCamelCase:E,toSnakeCase:T,wrapSubstitutions:f},Yt}var Jt,ws;function js(){if(ws)return Jt;ws=1;const e=Oi(),t=Ni();return Jt={classes:e,helpers:t},Jt}var Gt,As;function Ls(){if(As)return Gt;As=1;const e=fi(),t=mi,{helpers:{mergeData:l},classes:{Response:u,ResponseError:h}}=js(),E="SG.",T="https://api.sendgrid.com/",f="https://email.twilio.com/",c="global",b={eu:"https://api.eu.sendgrid.com/",global:"https://api.sendgrid.com/"};class I{constructor(){this.auth="",this.impersonateSubuser="",this.sendgrid_region=c,this.defaultHeaders={Accept:"application/json","Content-Type":"application/json","User-Agent":"sendgrid/"+t.version+";nodejs"},this.defaultRequest={baseUrl:T,url:"",method:"GET",headers:{},maxContentLength:1/0,maxBodyLength:1/0}}setApiKey(g){this.auth="Bearer "+g,this.setDefaultRequest("baseUrl",b[this.sendgrid_region]),this.isValidApiKey(g)||console.warn(`API key does not start with "${E}".`)}setTwilioEmailAuth(g,v){const x=Buffer.from(g+":"+v).toString("base64");this.auth="Basic "+x,this.setDefaultRequest("baseUrl",f),this.isValidTwilioAuth(g,v)||console.warn("Twilio Email credentials must be non-empty strings.")}isValidApiKey(g){return this.isString(g)&&g.trim().startsWith(E)}isValidTwilioAuth(g,v){return this.isString(g)&&g&&this.isString(v)&&v}isString(g){return typeof g=="string"||g instanceof String}setImpersonateSubuser(g){this.impersonateSubuser=g}setDefaultHeader(g,v){return g!==null&&typeof g=="object"?(Object.assign(this.defaultHeaders,g),this):(this.defaultHeaders[g]=v,this)}setDefaultRequest(g,v){return g!==null&&typeof g=="object"?(Object.assign(this.defaultRequest,g),this):(this.defaultRequest[g]=v,this)}setDataResidency(g){return b.hasOwnProperty(g)?(this.sendgrid_region=g,this.setDefaultRequest("baseUrl",b[g])):console.warn('Region can only be "global" or "eu".'),this}createHeaders(g){const v=l(this.defaultHeaders,g);return typeof v.Authorization>"u"&&this.auth&&(v.Authorization=this.auth),this.impersonateSubuser&&(v["On-Behalf-Of"]=this.impersonateSubuser),v}createRequest(g){let v={url:g.uri||g.url,baseUrl:g.baseUrl,method:g.method,data:g.body,params:g.qs,headers:g.headers};return v=l(this.defaultRequest,v),v.headers=this.createHeaders(v.headers),v.baseURL=v.baseUrl,delete v.baseUrl,v}request(g,v){g=this.createRequest(g);const x=new Promise((j,B)=>{e(g).then(R=>j([new u(R.status,R.data,R.headers),R.data])).catch(R=>R.response&&R.response.status>=400?B(new h(R.response)):B(R))});if(v&&typeof v!="function")throw new Error("Callback passed is not a function.");return v?x.then(j=>v(null,j)).catch(j=>v(j,null)):x}}return Gt=I,Gt}var Kt,Ss;function Ii(){if(Ss)return Kt;Ss=1;const e=Ls();return Kt=new e,Kt}var vs;function Pi(){if(vs)return Ze.exports;vs=1;const e=Ii(),t=Ls();return Ze.exports=e,Ze.exports.Client=t,Ze.exports}var Xt,Ts;function _s(){if(Ts)return Xt;Ts=1;const{Client:e}=Pi(),{classes:{Mail:t}}=js();class l{constructor(){this.setClient(new e),this.setSubstitutionWrappers("{{","}}"),this.secretRules=[]}setClient(h){return this.client=h,this}setApiKey(h){return this.client.setApiKey(h),this}setTwilioEmailAuth(h,E){this.client.setTwilioEmailAuth(h,E)}setTimeout(h){typeof h>"u"||this.client.setDefaultRequest("timeout",h)}setSubstitutionWrappers(h,E){if(typeof h>"u"||typeof E>"u")throw new Error("Must provide both left and right side wrappers");return Array.isArray(this.substitutionWrappers)||(this.substitutionWrappers=[]),this.substitutionWrappers[0]=h,this.substitutionWrappers[1]=E,this}setSecretRules(h){h instanceof Array||(h=[h]);const E=h.map(function(T){const f=typeof T;if(f==="string")return{pattern:new RegExp(T)};if(f==="object"){T instanceof RegExp?T={pattern:T}:T.hasOwnProperty("pattern")&&typeof T.pattern=="string"&&(T.pattern=new RegExp(T.pattern));try{return T.pattern.test(""),T}catch{}}});this.secretRules=E.filter(function(T){return T})}filterSecrets(h){if(typeof h=="object"&&!h.hasOwnProperty("content"))return;const E=this;h.content.forEach(function(T){E.secretRules.forEach(function(f){if(f.hasOwnProperty("pattern")&&!f.pattern.test(T.value))return;let c=`The pattern '${f.pattern}'`;throw f.name&&(c+=`identified by '${f.name}'`),c+=" was found in the Mail content!",new Error(c)})})}send(h,E=!1,T){if(typeof E=="function"&&(T=E,E=!1),Array.isArray(h)){const f=Promise.all(h.map(c=>this.send(c,E)));return T&&f.then(c=>T(null,c)).catch(c=>T(c,null)),f}try{typeof h.isMultiple>"u"&&(h.isMultiple=E),typeof h.substitutionWrappers>"u"&&(h.substitutionWrappers=this.substitutionWrappers);const f=t.create(h),c=f.toJSON();this.filterSecrets(c);const b={method:"POST",url:"/v3/mail/send",headers:f.headers,body:c};return this.client.request(b,T)}catch(f){return T&&T(f,null),Promise.reject(f)}}sendMultiple(h,E){return this.send(h,!0,E)}}return Xt=l,Xt}var Zt,Rs;function Mi(){if(Rs)return Zt;Rs=1;const e=_s();return Zt=new e,Zt}var Cs;function ki(){if(Cs)return Xe.exports;Cs=1;const e=Mi(),t=_s();return Xe.exports=e,Xe.exports.MailService=t,Xe.exports}var Ui=ki();const et=ui(Ui);var Bs=(e=>(e.DAILY="DAILY",e.HOURLY="HOURLY",e.MINUTELY="MINUTELY",e.MONTHLY="MONTHLY",e.SECONDLY="SECONDLY",e.WEEKLY="WEEKLY",e.YEARLY="YEARLY",e))(Bs||{}),rr=(e=>(e.FR="FR",e.MO="MO",e.SA="SA",e.SU="SU",e.TH="TH",e.TU="TU",e.WE="WE",e))(rr||{});function Z(e,t,l){if(Array.isArray(t))e.x=t.map(u=>{if(Array.isArray(u))return u;if(typeof u.key!="string"||typeof u.value!="string")throw new Error("Either key or value is not a string!");if(u.key.substr(0,2)!=="X-")throw new Error("Key has to start with `X-`!");return[u.key,u.value]});else if(typeof t=="object")e.x=Object.entries(t).map(([u,h])=>{if(typeof u!="string"||typeof h!="string")throw new Error("Either key or value is not a string!");if(u.substr(0,2)!=="X-")throw new Error("Key has to start with `X-`!");return[u,h]});else if(typeof t=="string"&&typeof l=="string"){if(t.substr(0,2)!=="X-")throw new Error("Key has to start with `X-`!");e.x.push([t,l])}else return e.x.map(u=>({key:u[0],value:u[1]}))}function ie(e,t){if(e instanceof Date&&isNaN(e.getTime())||typeof e=="string"&&isNaN(new Date(e).getTime()))throw new Error(`\`${t}\` has to be a valid date!`);if(e instanceof Date||typeof e=="string"||st(e)&&e.isValid===!0||(nt(e)||Li(e))&&e.isValid())return e;throw new Error(`\`${t}\` has to be a valid date!`)}function X(e,t){let l=Object.values(e),u=String(t).toUpperCase();if(!u||!l.includes(u))throw new Error(`Input must be one of the following: ${l.join(", ")}`);return u}function Ne(e,t){let l=null;if(typeof t=="string"){let u=t.match(/^(.+) ?<([^>]+)>$/);u?l={email:u[2].trim(),name:u[1].trim()}:t.includes("@")&&(l={email:t.trim(),name:t.trim()})}else typeof t=="object"&&(l={email:t.email,mailto:t.mailto,name:t.name,sentBy:t.sentBy});if(!l&&typeof t=="string")throw new Error("`"+e+"` isn't formated correctly. See https://sebbo2002.github.io/ical-generator/develop/reference/interfaces/ICalOrganizer.html");if(!l)throw new Error("`"+e+"` needs to be a valid formed string or an object. See https://sebbo2002.github.io/ical-generator/develop/reference/interfaces/ICalOrganizer.html");if(!l.name)throw new Error("`"+e+".name` is empty!");return l}function U(e,t){return String(e).replace(t?/[\\"]/g:/[\\;,]/g,function(l){return"\\"+l}).replace(/(?:\r\n|\r|\n)/g,"\\n")}function ji(e){return e.split(`\r
`).map(function(t){let l="",u=0;for(let h=0;h<t.length;h++){let E=t.charAt(h);E>="\uD800"&&E<="\uDBFF"&&(E+=t.charAt(++h));let T=new TextEncoder().encode(E).length;u+=T,u>74&&(l+=`\r
 `,u=T),l+=E}return l}).join(`\r
`)}function te(e,t,l,u){if(e?.startsWith("/")&&(e=e.substr(1)),typeof t=="string"||t instanceof Date){let h=Bi(t)?t.withTimeZone(e):new Date(t),E=h.getUTCFullYear()+String(h.getUTCMonth()+1).padStart(2,"0")+h.getUTCDate().toString().padStart(2,"0");return e&&(E=h.getFullYear()+String(h.getMonth()+1).padStart(2,"0")+h.getDate().toString().padStart(2,"0")),l?E:e?(E+="T"+h.getHours().toString().padStart(2,"0")+h.getMinutes().toString().padStart(2,"0")+h.getSeconds().toString().padStart(2,"0"),E):(E+="T"+h.getUTCHours().toString().padStart(2,"0")+h.getUTCMinutes().toString().padStart(2,"0")+h.getUTCSeconds().toString().padStart(2,"0")+(u?"":"Z"),E)}else if(nt(t)){let h=e?Ds(t)&&!t.tz()?t.clone().tz(e):t:u||l&&Ds(t)&&t.tz()?t:t.utc();return h.format("YYYYMMDD")+(l?"":"T"+h.format("HHmmss")+(u||e?"":"Z"))}else if(st(t)){let h=e?t.setZone(e):u||l&&t.zone.type!=="system"?t:t.setZone("utc");return h.toFormat("yyyyLLdd")+(l?"":"T"+h.toFormat("HHmmss")+(u||e?"":"Z"))}else{let h=t;if(e)h=typeof t.tz=="function"?t.tz(e):t;else if(!u)if(typeof t.utc=="function")h=t.utc();else throw new Error("Unable to convert dayjs object to UTC value: UTC plugin is not available!");return h.format("YYYYMMDD")+(l?"":"T"+h.format("HHmmss")+(u||e?"":"Z"))}}function Qt(e,t,l,u){let h="",E=u?.floating||!1;return u?.timezone&&(h=";TZID="+u.timezone,E=!0),t+h+":"+te(e,l,!1,E)}function ir(e){let t=e.x.map(([l,u])=>l.toUpperCase()+":"+U(u,!1)).join(`\r
`);return t.length?t+`\r
`:""}function Li(e){return typeof e=="object"&&e!==null&&!(e instanceof Date)&&!nt(e)&&!st(e)}function st(e){return typeof e=="object"&&e!==null&&"toJSDate"in e&&typeof e.toJSDate=="function"}function nt(e){return e!=null&&e._isAMomentObject!=null}function _i(e){return e!==null&&typeof e=="object"&&"asSeconds"in e&&typeof e.asSeconds=="function"}function Ds(e){return nt(e)&&"tz"in e&&typeof e.tz=="function"}function er(e){return e!==null&&typeof e=="object"&&"between"in e&&typeof e.between=="function"&&typeof e.toString=="function"}function Bi(e){return e instanceof Date&&"internal"in e&&e.internal instanceof Date&&"withTimeZone"in e&&typeof e.withTimeZone=="function"&&"tzComponents"in e&&typeof e.tzComponents=="function"}function Os(e){return typeof e=="string"||e instanceof Date?new Date(e):st(e)?e.toJSDate():e.toDate()}function Re(e){let t="";return e<0&&(t="-",e*=-1),t+="P",e>=86400&&(t+=Math.floor(e/86400)+"D",e%=86400),!e&&t.length>1||(t+="T",e>=3600&&(t+=Math.floor(e/3600)+"H",e%=3600),e>=60&&(t+=Math.floor(e/60)+"M",e%=60),e>0?t+=e+"S":t.length<=2&&(t+="0S")),t}function ae(e){return e?typeof e=="string"?e:e.toJSON():null}var Fs=(e=>(e.CHAIR="CHAIR",e.NON="NON-PARTICIPANT",e.OPT="OPT-PARTICIPANT",e.REQ="REQ-PARTICIPANT",e))(Fs||{}),qs=(e=>(e.CLIENT="CLIENT",e.NONE="NONE",e.SERVER="SERVER",e))(qs||{}),zs=(e=>(e.ACCEPTED="ACCEPTED",e.DECLINED="DECLINED",e.DELEGATED="DELEGATED",e.NEEDSACTION="NEEDS-ACTION",e.TENTATIVE="TENTATIVE",e))(zs||{}),Hs=(e=>(e.GROUP="GROUP",e.INDIVIDUAL="INDIVIDUAL",e.RESOURCE="RESOURCE",e.ROOM="ROOM",e.UNKNOWN="UNKNOWN",e))(Hs||{}),tt=class oe{data;parent;constructor(t,l){if(this.data={delegatedFrom:null,delegatedTo:null,email:"",mailto:null,name:null,role:"REQ-PARTICIPANT",rsvp:null,scheduleAgent:null,sentBy:null,status:null,type:null,x:[]},this.parent=l,!this.parent)throw new Error("`event` option required!");if(!t.email)throw new Error("No value for `email` in ICalAttendee given!");t.name!==void 0&&this.name(t.name),t.email!==void 0&&this.email(t.email),t.mailto!==void 0&&this.mailto(t.mailto),t.sentBy!==void 0&&this.sentBy(t.sentBy),t.status!==void 0&&this.status(t.status),t.role!==void 0&&this.role(t.role),t.rsvp!==void 0&&this.rsvp(t.rsvp),t.type!==void 0&&this.type(t.type),t.delegatedTo!==void 0&&this.delegatedTo(t.delegatedTo),t.delegatedFrom!==void 0&&this.delegatedFrom(t.delegatedFrom),t.delegatesTo&&this.delegatesTo(t.delegatesTo),t.delegatesFrom&&this.delegatesFrom(t.delegatesFrom),t.scheduleAgent!==void 0&&this.scheduleAgent(t.scheduleAgent),t.x!==void 0&&this.x(t.x)}delegatedFrom(t){return t===void 0?this.data.delegatedFrom:(t?typeof t=="string"?this.data.delegatedFrom=new oe({email:t,...Ne("delegatedFrom",t)},this.parent):t instanceof oe?this.data.delegatedFrom=t:this.data.delegatedFrom=new oe(t,this.parent):this.data.delegatedFrom=null,this)}delegatedTo(t){return t===void 0?this.data.delegatedTo:t?(typeof t=="string"?this.data.delegatedTo=new oe({email:t,...Ne("delegatedTo",t)},this.parent):t instanceof oe?this.data.delegatedTo=t:this.data.delegatedTo=new oe(t,this.parent),this.data.status="DELEGATED",this):(this.data.delegatedTo=null,this.data.status==="DELEGATED"&&(this.data.status=null),this)}delegatesFrom(t){let l=t instanceof oe?t:this.parent.createAttendee(t);return this.delegatedFrom(l),l.delegatedTo(this),l}delegatesTo(t){let l=t instanceof oe?t:this.parent.createAttendee(t);return this.delegatedTo(l),l.delegatedFrom(this),l}email(t){return t?(this.data.email=t,this):this.data.email}mailto(t){return t===void 0?this.data.mailto:(this.data.mailto=t||null,this)}name(t){return t===void 0?this.data.name:(this.data.name=t||null,this)}role(t){return t===void 0?this.data.role:(this.data.role=X(Fs,t),this)}rsvp(t){return t===void 0?this.data.rsvp:t===null?(this.data.rsvp=null,this):(this.data.rsvp=!!t,this)}scheduleAgent(t){return t===void 0?this.data.scheduleAgent:t?typeof t=="string"&&t.toUpperCase().startsWith("X-")?(this.data.scheduleAgent=t,this):(this.data.scheduleAgent=X(qs,t),this):(this.data.scheduleAgent=null,this)}sentBy(t){return t?(this.data.sentBy=t,this):this.data.sentBy}status(t){return t===void 0?this.data.status:t?(this.data.status=X(zs,t),this):(this.data.status=null,this)}toJSON(){return Object.assign({},this.data,{delegatedFrom:this.data.delegatedFrom?.email()||null,delegatedTo:this.data.delegatedTo?.email()||null,x:this.x()})}toString(){let t="ATTENDEE";if(!this.data.email)throw new Error("No value for `email` in ICalAttendee given!");return t+=";ROLE="+this.data.role,this.data.type&&(t+=";CUTYPE="+this.data.type),this.data.status&&(t+=";PARTSTAT="+this.data.status),this.data.rsvp!==null&&(t+=";RSVP="+this.data.rsvp.toString().toUpperCase()),this.data.sentBy!==null&&(t+=';SENT-BY="mailto:'+this.data.sentBy+'"'),this.data.delegatedTo&&(t+=';DELEGATED-TO="'+this.data.delegatedTo.email()+'"'),this.data.delegatedFrom&&(t+=';DELEGATED-FROM="'+this.data.delegatedFrom.email()+'"'),this.data.name&&(t+=';CN="'+U(this.data.name,!0)+'"'),this.data.email&&this.data.mailto&&(t+=";EMAIL="+U(this.data.email,!1)),this.data.scheduleAgent&&(t+=";SCHEDULE-AGENT="+this.data.scheduleAgent),this.data.x.length&&(t+=";"+this.data.x.map(([l,u])=>l.toUpperCase()+"="+U(u,!1)).join(";")),t+=":MAILTO:"+U(this.data.mailto||this.data.email,!1)+`\r
`,t}type(t){return t===void 0?this.data.type:t?(this.data.type=X(Hs,t),this):(this.data.type=null,this)}x(t,l){if(t===void 0)return Z(this.data);if(typeof t=="string"&&typeof l=="string")Z(this.data,t,l);else if(typeof t=="object")Z(this.data,t);else throw new Error("Either key or value is not a string!");return this}},$s=(e=>(e.audio="audio",e.display="display",e.email="email",e))($s||{}),Fi={end:"END",start:"START"},xs=class{data;event;constructor(e,t){if(this.data={attach:null,attendees:[],description:null,interval:null,relatesTo:null,repeat:null,summary:null,trigger:-600,type:"display",x:[]},this.event=t,!t)throw new Error("`event` option required!");e.type!==void 0&&this.type(e.type),"trigger"in e&&e.trigger!==void 0&&this.trigger(e.trigger),"triggerBefore"in e&&e.triggerBefore!==void 0&&this.triggerBefore(e.triggerBefore),"triggerAfter"in e&&e.triggerAfter!==void 0&&this.triggerAfter(e.triggerAfter),e.repeat&&this.repeat(e.repeat),e.attach!==void 0&&this.attach(e.attach),e.description!==void 0&&this.description(e.description),e.summary!==void 0&&this.summary(e.summary),e.attendees!==void 0&&this.attendees(e.attendees),e.x!==void 0&&this.x(e.x)}attach(e){if(e===void 0)return this.data.attach;if(!e)return this.data.attach=null,this;let t=null;if(typeof e=="string")t={mime:null,uri:e};else if(typeof e=="object")t={mime:e.mime||null,uri:e.uri};else throw new Error("`attachment` needs to be a valid formed string or an object. See https://sebbo2002.github.io/ical-generator/develop/reference/classes/ICalAlarm.html#attach");if(!t.uri)throw new Error("`attach.uri` is empty!");return this.data.attach={mime:t.mime,uri:t.uri},this}attendees(e){return e?(e.forEach(t=>this.createAttendee(t)),this):this.data.attendees}createAttendee(e){if(e instanceof tt)return this.data.attendees.push(e),e;typeof e=="string"&&(e={email:e,...Ne("data",e)});let t=new tt(e,this);return this.data.attendees.push(t),t}description(e){return e===void 0?this.data.description:e?(this.data.description=e,this):(this.data.description=null,this)}relatesTo(e){if(e===void 0)return this.data.relatesTo;if(!e)return this.data.relatesTo=null,this;if(!Object.values(Fi).includes(e))throw new Error("`relatesTo` is not correct, must be either `START` or `END`!");return this.data.relatesTo=e,this}repeat(e){if(e===void 0)return this.data.repeat;if(!e)return this.data.repeat=null,this;if(typeof e!="object")throw new Error("`repeat` is not correct, must be an object!");if(typeof e.times!="number"||!isFinite(e.times))throw new Error("`repeat.times` is not correct, must be numeric!");if(typeof e.interval!="number"||!isFinite(e.interval))throw new Error("`repeat.interval` is not correct, must be numeric!");return this.data.repeat=e,this}summary(e){return e===void 0?this.data.summary:e?(this.data.summary=e,this):(this.data.summary=null,this)}toJSON(){let e=this.trigger();return Object.assign({},this.data,{trigger:typeof e=="number"?e:ae(e),x:this.x()})}toString(){let e=`BEGIN:VALARM\r
`;if(e+="ACTION:"+this.data.type.toUpperCase()+`\r
`,typeof this.data.trigger=="number"&&this.data.relatesTo===null?this.data.trigger>0?e+="TRIGGER;RELATED=END:"+Re(this.data.trigger)+`\r
`:e+="TRIGGER:"+Re(this.data.trigger)+`\r
`:typeof this.data.trigger=="number"?e+="TRIGGER;RELATED="+this.data.relatesTo?.toUpperCase()+":"+Re(this.data.trigger)+`\r
`:e+="TRIGGER;VALUE=DATE-TIME:"+te(this.event.timezone(),this.data.trigger)+`\r
`,this.data.repeat){if(!this.data.repeat.times)throw new Error("No value for `repeat.times` in ICalAlarm given, but required for `interval`!");if(!this.data.repeat.interval)throw new Error("No value for `repeat.interval` in ICalAlarm given, but required for `repeat`!");e+="REPEAT:"+this.data.repeat.times+`\r
`,e+="DURATION:"+Re(this.data.repeat.interval)+`\r
`}return this.data.type==="audio"&&this.data.attach&&this.data.attach.mime?e+="ATTACH;FMTTYPE="+U(this.data.attach.mime,!1)+":"+U(this.data.attach.uri,!1)+`\r
`:this.data.type==="audio"&&this.data.attach?e+="ATTACH;VALUE=URI:"+U(this.data.attach.uri,!1)+`\r
`:this.data.type==="audio"&&(e+=`ATTACH;VALUE=URI:Basso\r
`),this.data.type!=="audio"&&this.data.description?e+="DESCRIPTION:"+U(this.data.description,!1)+`\r
`:this.data.type!=="audio"&&(e+="DESCRIPTION:"+U(this.event.summary(),!1)+`\r
`),this.data.type==="email"&&this.data.summary?e+="SUMMARY:"+U(this.data.summary,!1)+`\r
`:this.data.type==="email"&&(e+="SUMMARY:"+U(this.event.summary(),!1)+`\r
`),this.data.type==="email"&&this.data.attendees.forEach(t=>{e+=t.toString()}),e+=ir(this.data),e+=`END:VALARM\r
`,e}trigger(e){if(e===void 0&&typeof this.data.trigger=="number")return-1*this.data.trigger;if(e===void 0)return this.data.trigger;if(typeof e=="number"&&isFinite(e))this.data.trigger=-1*e;else{if(!e||typeof e=="number")throw new Error("`trigger` is not correct, must be a finite number or a supported date!");this.data.trigger=ie(e,"trigger")}return this}triggerAfter(e){return e===void 0?this.data.trigger:this.trigger(typeof e=="number"?-1*e:e)}triggerBefore(e){return e===void 0?this.trigger():this.trigger(e)}type(e){if(e===void 0)return this.data.type;if(!e||!Object.keys($s).includes(e))throw new Error("`type` is not correct, must be either `display` or `audio`!");return this.data.type=e,this}x(e,t){if(e===void 0)return Z(this.data);if(typeof e=="string"&&typeof t=="string")Z(this.data,e,t);else if(typeof e=="object")Z(this.data,e);else throw new Error("Either key or value is not a string!");return this}},Ns=class{data;constructor(e){if(this.data={name:""},!e.name)throw new Error("No value for `name` in ICalCategory given!");this.name(e.name)}name(e){return e===void 0?this.data.name:(this.data.name=e,this)}toJSON(){return Object.assign({},this.data)}toString(){return U(this.data.name,!1)}},Ws=(e=>(e.BUSY="BUSY",e.FREE="FREE",e.OOF="OOF",e.TENTATIVE="TENTATIVE",e))(Ws||{}),Vs=(e=>(e.CONFIDENTIAL="CONFIDENTIAL",e.PRIVATE="PRIVATE",e.PUBLIC="PUBLIC",e))(Vs||{}),Ys=(e=>(e.CANCELLED="CANCELLED",e.CONFIRMED="CONFIRMED",e.TENTATIVE="TENTATIVE",e))(Ys||{}),Js=(e=>(e.OPAQUE="OPAQUE",e.TRANSPARENT="TRANSPARENT",e))(Js||{}),Is=class{calendar;data;constructor(e,t){if(this.data={alarms:[],allDay:!1,attachments:[],attendees:[],busystatus:null,categories:[],class:null,created:null,description:null,end:null,floating:!1,id:crypto.randomUUID(),lastModified:null,location:null,organizer:null,priority:null,recurrenceId:null,repeating:null,sequence:0,stamp:new Date,start:new Date,status:null,summary:"",timezone:null,transparency:null,url:null,x:[]},this.calendar=t,!t)throw new Error("`calendar` option required!");e.id&&this.id(e.id),e.sequence!==void 0&&this.sequence(e.sequence),e.start&&this.start(e.start),e.end!==void 0&&this.end(e.end),e.recurrenceId!==void 0&&this.recurrenceId(e.recurrenceId),e.timezone!==void 0&&this.timezone(e.timezone),e.stamp!==void 0&&this.stamp(e.stamp),e.allDay!==void 0&&this.allDay(e.allDay),e.floating!==void 0&&this.floating(e.floating),e.repeating!==void 0&&this.repeating(e.repeating),e.summary!==void 0&&this.summary(e.summary),e.location!==void 0&&this.location(e.location),e.description!==void 0&&this.description(e.description),e.organizer!==void 0&&this.organizer(e.organizer),e.attendees!==void 0&&this.attendees(e.attendees),e.alarms!==void 0&&this.alarms(e.alarms),e.categories!==void 0&&this.categories(e.categories),e.status!==void 0&&this.status(e.status),e.busystatus!==void 0&&this.busystatus(e.busystatus),e.priority!==void 0&&this.priority(e.priority),e.url!==void 0&&this.url(e.url),e.attachments!==void 0&&this.attachments(e.attachments),e.transparency!==void 0&&this.transparency(e.transparency),e.created!==void 0&&this.created(e.created),e.lastModified!==void 0&&this.lastModified(e.lastModified),e.class!==void 0&&this.class(e.class),e.x!==void 0&&this.x(e.x)}alarms(e){return e?(e.forEach(t=>this.createAlarm(t)),this):this.data.alarms}allDay(e){return e===void 0?this.data.allDay:(this.data.allDay=!!e,this)}attachments(e){return e?(e.forEach(t=>this.createAttachment(t)),this):this.data.attachments}attendees(e){return e?(e.forEach(t=>this.createAttendee(t)),this):this.data.attendees}busystatus(e){return e===void 0?this.data.busystatus:e===null?(this.data.busystatus=null,this):(this.data.busystatus=X(Ws,e),this)}categories(e){return e?(e.forEach(t=>this.createCategory(t)),this):this.data.categories}class(e){return e===void 0?this.data.class:e===null?(this.data.class=null,this):(this.data.class=X(Vs,e),this)}createAlarm(e){let t=e instanceof xs?e:new xs(e,this);return this.data.alarms.push(t),t}createAttachment(e){return this.data.attachments.push(e),this}createAttendee(e){if(e instanceof tt)return this.data.attendees.push(e),e;typeof e=="string"&&(e={email:e,...Ne("data",e)});let t=new tt(e,this);return this.data.attendees.push(t),t}createCategory(e){let t=e instanceof Ns?e:new Ns(e);return this.data.categories.push(t),t}created(e){return e===void 0?this.data.created:e===null?(this.data.created=null,this):(this.data.created=ie(e,"created"),this)}description(e){return e===void 0?this.data.description:e===null?(this.data.description=null,this):(typeof e=="string"?this.data.description={plain:e}:this.data.description=e,this)}end(e){return e===void 0?(this.swapStartAndEndIfRequired(),this.data.end):e===null?(this.data.end=null,this):(this.data.end=ie(e,"end"),this)}floating(e){return e===void 0?this.data.floating:(this.data.floating=!!e,this.data.floating&&(this.data.timezone=null),this)}id(e){return e===void 0?this.data.id:(this.data.id=String(e),this)}lastModified(e){return e===void 0?this.data.lastModified:e===null?(this.data.lastModified=null,this):(this.data.lastModified=ie(e,"lastModified"),this)}location(e){if(e===void 0)return this.data.location;if(typeof e=="string")return this.data.location={title:e},this;if(e&&("title"in e&&!e.title||e?.geo&&(typeof e.geo.lat!="number"||!isFinite(e.geo.lat)||typeof e.geo.lon!="number"||!isFinite(e.geo.lon))||!("title"in e)&&!e?.geo))throw new Error("`location` isn't formatted correctly. See https://sebbo2002.github.io/ical-generator/develop/reference/classes/ICalEvent.html#location");return this.data.location=e||null,this}organizer(e){return e===void 0?this.data.organizer:e===null?(this.data.organizer=null,this):(this.data.organizer=Ne("organizer",e),this)}priority(e){if(e===void 0)return this.data.priority;if(e===null)return this.data.priority=null,this;if(e<0||e>9)throw new Error("`priority` is invalid, musst be 0 ≤ priority ≤ 9.");return this.data.priority=Math.round(e),this}recurrenceId(e){return e===void 0?this.data.recurrenceId:e===null?(this.data.recurrenceId=null,this):(this.data.recurrenceId=ie(e,"recurrenceId"),this)}repeating(e){if(e===void 0)return this.data.repeating;if(!e)return this.data.repeating=null,this;if(er(e)||typeof e=="string")return this.data.repeating=e,this;if(this.data.repeating={freq:X(Bs,e.freq)},e.count){if(!isFinite(e.count))throw new Error("`repeating.count` must be a finite number!");this.data.repeating.count=e.count}if(e.interval){if(!isFinite(e.interval))throw new Error("`repeating.interval` must be a finite number!");this.data.repeating.interval=e.interval}if(e.until!==void 0&&(this.data.repeating.until=ie(e.until,"repeating.until")),e.byDay){let t=Array.isArray(e.byDay)?e.byDay:[e.byDay];this.data.repeating.byDay=t.map(l=>X(rr,l))}if(e.byMonth){let t=Array.isArray(e.byMonth)?e.byMonth:[e.byMonth];this.data.repeating.byMonth=t.map(l=>{if(typeof l!="number"||l<1||l>12)throw new Error("`repeating.byMonth` contains invalid value `"+l+"`!");return l})}if(e.byMonthDay){let t=Array.isArray(e.byMonthDay)?e.byMonthDay:[e.byMonthDay];this.data.repeating.byMonthDay=t.map(l=>{if(typeof l!="number"||l<-31||l>31||l===0)throw new Error("`repeating.byMonthDay` contains invalid value `"+l+"`!");return l})}if(e.bySetPos){if(!this.data.repeating.byDay)throw"`repeating.bySetPos` must be used along with `repeating.byDay`!";let t=Array.isArray(e.bySetPos)?e.bySetPos:[e.bySetPos];this.data.repeating.bySetPos=t.map(l=>{if(typeof l!="number"||l<-366||l>366||l===0)throw"`repeating.bySetPos` contains invalid value `"+l+"`!";return l})}if(e.exclude){let t=Array.isArray(e.exclude)?e.exclude:[e.exclude];this.data.repeating.exclude=t.map((l,u)=>ie(l,`repeating.exclude[${u}]`))}return e.startOfWeek&&(this.data.repeating.startOfWeek=X(rr,e.startOfWeek)),this}sequence(e){if(e===void 0)return this.data.sequence;let t=parseInt(String(e),10);if(isNaN(t))throw new Error("`sequence` must be a number!");return this.data.sequence=e,this}stamp(e){return e===void 0?this.data.stamp:(this.data.stamp=ie(e,"stamp"),this)}start(e){return e===void 0?(this.swapStartAndEndIfRequired(),this.data.start):(this.data.start=ie(e,"start"),this)}status(e){return e===void 0?this.data.status:e===null?(this.data.status=null,this):(this.data.status=X(Ys,e),this)}summary(e){return e===void 0?this.data.summary:(this.data.summary=e?String(e):"",this)}timestamp(e){return e===void 0?this.stamp():this.stamp(e)}timezone(e){return e===void 0&&this.data.timezone!==null?this.data.timezone:e===void 0?this.calendar.timezone():(this.data.timezone=e&&e!=="UTC"?e.toString():null,this.data.timezone&&(this.data.floating=!1),this)}toJSON(){let e=null;return er(this.data.repeating)||typeof this.data.repeating=="string"?e=this.data.repeating.toString():this.data.repeating&&(e=Object.assign({},this.data.repeating,{exclude:this.data.repeating.exclude?.map(t=>ae(t)),until:ae(this.data.repeating.until)||void 0})),this.swapStartAndEndIfRequired(),Object.assign({},this.data,{created:ae(this.data.created)||null,end:ae(this.data.end)||null,lastModified:ae(this.data.lastModified)||null,recurrenceId:ae(this.data.recurrenceId)||null,repeating:e,stamp:ae(this.data.stamp)||null,start:ae(this.data.start)||null,x:this.x()})}toString(){let e="";if(e+=`BEGIN:VEVENT\r
`,e+="UID:"+this.data.id+`\r
`,e+="SEQUENCE:"+this.data.sequence+`\r
`,this.swapStartAndEndIfRequired(),e+="DTSTAMP:"+te(this.calendar.timezone(),this.data.stamp)+`\r
`,this.data.allDay?(e+="DTSTART;VALUE=DATE:"+te(this.timezone(),this.data.start,!0)+`\r
`,this.data.end&&(e+="DTEND;VALUE=DATE:"+te(this.timezone(),this.data.end,!0)+`\r
`),e+=`X-MICROSOFT-CDO-ALLDAYEVENT:TRUE\r
`,e+=`X-MICROSOFT-MSNCALENDAR-ALLDAYEVENT:TRUE\r
`):(e+=Qt(this.timezone(),"DTSTART",this.data.start,this.data)+`\r
`,this.data.end&&(e+=Qt(this.timezone(),"DTEND",this.data.end,this.data)+`\r
`)),er(this.data.repeating)||typeof this.data.repeating=="string"){let t=this.data.repeating.toString().replace(/\r\n/g,`
`).split(`
`).filter(l=>l&&!l.startsWith("DTSTART:")).join(`\r
`);!t.includes(`\r
`)&&!t.startsWith("RRULE:")&&(t="RRULE:"+t),e+=t.trim()+`\r
`}else this.data.repeating&&(e+="RRULE:FREQ="+this.data.repeating.freq,this.data.repeating.count&&(e+=";COUNT="+this.data.repeating.count),this.data.repeating.interval&&(e+=";INTERVAL="+this.data.repeating.interval),this.data.repeating.until&&(e+=";UNTIL="+te(this.calendar.timezone(),this.data.repeating.until,!1,this.floating())),this.data.repeating.byDay&&(e+=";BYDAY="+this.data.repeating.byDay.join(",")),this.data.repeating.byMonth&&(e+=";BYMONTH="+this.data.repeating.byMonth.join(",")),this.data.repeating.byMonthDay&&(e+=";BYMONTHDAY="+this.data.repeating.byMonthDay.join(",")),this.data.repeating.bySetPos&&(e+=";BYSETPOS="+this.data.repeating.bySetPos.join(",")),this.data.repeating.startOfWeek&&(e+=";WKST="+this.data.repeating.startOfWeek),e+=`\r
`,this.data.repeating.exclude&&(this.data.allDay?e+="EXDATE;VALUE=DATE:"+this.data.repeating.exclude.map(t=>te(this.calendar.timezone(),t,!0)).join(",")+`\r
`:(e+="EXDATE",this.timezone()?e+=";TZID="+this.timezone()+":"+this.data.repeating.exclude.map(t=>te(this.timezone(),t,!1,!0)).join(",")+`\r
`:e+=":"+this.data.repeating.exclude.map(t=>te(this.timezone(),t,!1,this.floating())).join(",")+`\r
`)));return this.data.recurrenceId&&(e+=Qt(this.timezone(),"RECURRENCE-ID",this.data.recurrenceId,this.data)+`\r
`),e+="SUMMARY:"+U(this.data.summary,!1)+`\r
`,this.data.transparency&&(e+="TRANSP:"+U(this.data.transparency,!1)+`\r
`),this.data.location&&"title"in this.data.location&&this.data.location.title&&(e+="LOCATION:"+U(this.data.location.title+(this.data.location.address?`
`+this.data.location.address:""),!1)+`\r
`,this.data.location.radius&&this.data.location.geo&&(e+="X-APPLE-STRUCTURED-LOCATION;VALUE=URI;"+(this.data.location.address?"X-ADDRESS="+U(this.data.location.address,!1)+";":"")+"X-APPLE-RADIUS="+U(this.data.location.radius,!1)+";X-TITLE="+U(this.data.location.title,!1)+":geo:"+U(this.data.location.geo?.lat,!1)+","+U(this.data.location.geo?.lon,!1)+`\r
`)),this.data.location?.geo?.lat&&this.data.location.geo.lon&&(e+="GEO:"+U(this.data.location.geo.lat,!1)+";"+U(this.data.location.geo.lon,!1)+`\r
`),this.data.description&&(e+="DESCRIPTION:"+U(this.data.description.plain,!1)+`\r
`,this.data.description.html&&(e+="X-ALT-DESC;FMTTYPE=text/html:"+U(this.data.description.html,!1)+`\r
`)),this.data.organizer&&(e+='ORGANIZER;CN="'+U(this.data.organizer.name,!0)+'"',this.data.organizer.sentBy&&(e+=';SENT-BY="mailto:'+U(this.data.organizer.sentBy,!0)+'"'),this.data.organizer.email&&this.data.organizer.mailto&&(e+=";EMAIL="+U(this.data.organizer.email,!1)),e+=":",this.data.organizer.email&&(e+="mailto:"+U(this.data.organizer.mailto||this.data.organizer.email,!1)),e+=`\r
`),this.data.attendees.forEach(function(t){e+=t.toString()}),this.data.alarms.forEach(function(t){e+=t.toString()}),this.data.categories.length>0&&(e+="CATEGORIES:"+this.data.categories.map(t=>t.toString()).join()+`\r
`),this.data.url&&(e+="URL;VALUE=URI:"+U(this.data.url,!1)+`\r
`),this.data.attachments.length>0&&this.data.attachments.forEach(t=>{e+="ATTACH:"+U(t,!1)+`\r
`}),this.data.status&&(e+="STATUS:"+this.data.status.toUpperCase()+`\r
`),this.data.busystatus&&(e+="X-MICROSOFT-CDO-BUSYSTATUS:"+this.data.busystatus.toUpperCase()+`\r
`),this.data.priority!==null&&(e+="PRIORITY:"+this.data.priority+`\r
`),e+=ir(this.data),this.data.created&&(e+="CREATED:"+te(this.calendar.timezone(),this.data.created)+`\r
`),this.data.lastModified&&(e+="LAST-MODIFIED:"+te(this.calendar.timezone(),this.data.lastModified)+`\r
`),this.data.class&&(e+="CLASS:"+this.data.class.toUpperCase()+`\r
`),e+=`END:VEVENT\r
`,e}transparency(e){return e===void 0?this.data.transparency:e?(this.data.transparency=X(Js,e),this):(this.data.transparency=null,this)}uid(e){return e===void 0?this.id():this.id(e)}url(e){return e===void 0?this.data.url:(this.data.url=e?String(e):null,this)}x(e,t){return e===void 0?Z(this.data):(typeof e=="string"&&typeof t=="string"&&Z(this.data,e,t),typeof e=="object"&&Z(this.data,e),this)}swapStartAndEndIfRequired(){if(this.data.start&&this.data.end&&Os(this.data.start).getTime()>Os(this.data.end).getTime()){let e=this.data.start;this.data.start=this.data.end,this.data.end=e}}},Gs=(e=>(e.ADD="ADD",e.CANCEL="CANCEL",e.COUNTER="COUNTER",e.DECLINECOUNTER="DECLINECOUNTER",e.PUBLISH="PUBLISH",e.REFRESH="REFRESH",e.REPLY="REPLY",e.REQUEST="REQUEST",e))(Gs||{}),qi=class{data;constructor(e={}){this.data={description:null,events:[],method:null,name:null,prodId:"//sebbo.net//ical-generator//EN",scale:null,source:null,timezone:null,ttl:null,url:null,x:[]},e.prodId!==void 0&&this.prodId(e.prodId),e.method!==void 0&&this.method(e.method),e.name!==void 0&&this.name(e.name),e.description!==void 0&&this.description(e.description),e.timezone!==void 0&&this.timezone(e.timezone),e.source!==void 0&&this.source(e.source),e.url!==void 0&&this.url(e.url),e.scale!==void 0&&this.scale(e.scale),e.ttl!==void 0&&this.ttl(e.ttl),e.events!==void 0&&this.events(e.events),e.x!==void 0&&this.x(e.x)}clear(){return this.data.events=[],this}createEvent(e){let t=e instanceof Is?e:new Is(e,this);return this.data.events.push(t),t}description(e){return e===void 0?this.data.description:(this.data.description=e?String(e):null,this)}events(e){return e?(e.forEach(t=>this.createEvent(t)),this):this.data.events}length(){return this.data.events.length}method(e){return e===void 0?this.data.method:e?(this.data.method=X(Gs,e),this):(this.data.method=null,this)}name(e){return e===void 0?this.data.name:(this.data.name=e?String(e):null,this)}prodId(e){if(!e)return this.data.prodId;if(typeof e=="string")return this.data.prodId=e,this;if(typeof e!="object")throw new Error("`prodid` needs to be a string or an object!");if(!e.company)throw new Error("`prodid.company` is a mandatory item!");if(!e.product)throw new Error("`prodid.product` is a mandatory item!");let t=(e.language||"EN").toUpperCase();return this.data.prodId="//"+e.company+"//"+e.product+"//"+t,this}scale(e){return e===void 0?this.data.scale:(e===null?this.data.scale=null:this.data.scale=e.toUpperCase(),this)}source(e){return e===void 0?this.data.source:(this.data.source=e||null,this)}timezone(e){return e===void 0?this.data.timezone?.name||null:(e==="UTC"?this.data.timezone=null:typeof e=="string"?this.data.timezone={name:e}:e===null?this.data.timezone=null:this.data.timezone=e,this)}toJSON(){return Object.assign({},this.data,{events:this.data.events.map(e=>e.toJSON()),timezone:this.timezone(),x:this.x()})}toString(){let e="";return e=`BEGIN:VCALENDAR\r
VERSION:2.0\r
`,e+="PRODID:-"+this.data.prodId+`\r
`,this.data.url&&(e+="URL:"+this.data.url+`\r
`),this.data.source&&(e+="SOURCE;VALUE=URI:"+this.data.source+`\r
`),this.data.scale&&(e+="CALSCALE:"+this.data.scale+`\r
`),this.data.method&&(e+="METHOD:"+this.data.method+`\r
`),this.data.name&&(e+="NAME:"+this.data.name+`\r
`,e+="X-WR-CALNAME:"+this.data.name+`\r
`),this.data.description&&(e+="X-WR-CALDESC:"+this.data.description+`\r
`),this.data.timezone?.generator&&[...new Set([this.timezone(),...this.data.events.map(t=>t.timezone())])].filter(t=>t!==null&&!t.startsWith("/")).forEach(t=>{if(!this.data.timezone?.generator)return;let l=this.data.timezone.generator(t);l&&(e+=l.replace(/\r\n/g,`
`).replace(/\n/g,`\r
`).trim()+`\r
`)}),this.data.timezone?.name&&(e+="TIMEZONE-ID:"+this.data.timezone.name+`\r
`,e+="X-WR-TIMEZONE:"+this.data.timezone.name+`\r
`),this.data.ttl&&(e+="REFRESH-INTERVAL;VALUE=DURATION:"+Re(this.data.ttl)+`\r
`,e+="X-PUBLISHED-TTL:"+Re(this.data.ttl)+`\r
`),this.data.events.forEach(t=>e+=t.toString()),e+=ir(this.data),e+="END:VCALENDAR",ji(e)}ttl(e){return e===void 0?this.data.ttl:(_i(e)?this.data.ttl=e.asSeconds():e&&e>0?this.data.ttl=e:this.data.ttl=null,this)}url(e){return e===void 0?this.data.url:(this.data.url=e||null,this)}x(e,t){if(e===void 0)return Z(this.data);if(typeof e=="string"&&typeof t=="string")Z(this.data,e,t);else if(typeof e=="object")Z(this.data,e);else throw new Error("Either key or value is not a string!");return this}};function zi(e){return new qi(e)}var Hi=zi;const $i="your-sendgrid-api-key-here";et.setApiKey($i);const Qe="test@example.com",tr="MindBridge Support";class Wi{constructor(){this.isConfigured=!0}async sendWelcomeEmail(t,l,u){if(!this.isConfigured)return console.warn("SendGrid not configured, skipping welcome email"),{success:!1,message:"Email service not configured"};try{const h={to:t,from:{email:Qe,name:tr},subject:"Welcome to MindBridge - Your Mental Health Journey Starts Here",text:this.getWelcomeEmailText(l,u),html:this.getWelcomeEmailHTML(l,u)};return await et.send(h),console.log("Welcome email sent successfully to:",t),{success:!0,message:"Welcome email sent"}}catch(h){return console.error("Error sending welcome email:",h),{success:!1,message:h.message}}}async sendAppointmentConfirmation(t,l,u){if(!this.isConfigured)return console.warn("SendGrid not configured, skipping appointment email"),{success:!1,message:"Email service not configured"};try{const h=this.generateICSFile(t,l,u),E={to:u.email,from:{email:Qe,name:tr},subject:`Appointment Confirmed - ${l.name} on ${this.formatDate(t.appointmentDate)}`,text:this.getAppointmentEmailText(t,l,u),html:this.getAppointmentEmailHTML(t,l,u),attachments:[{content:Buffer.from(h).toString("base64"),filename:"appointment.ics",type:"text/calendar",disposition:"attachment"}]};return await et.send(E),console.log("Appointment confirmation sent successfully to:",u.email),{success:!0,message:"Appointment confirmation sent"}}catch(h){return console.error("Error sending appointment confirmation:",h),{success:!1,message:h.message}}}async sendAppointmentReminder(t,l,u){if(!this.isConfigured)return console.warn("SendGrid not configured, skipping reminder email"),{success:!1,message:"Email service not configured"};try{const h={to:u.email,from:{email:Qe,name:tr},subject:`Reminder: Appointment Tomorrow with ${l.name}`,text:this.getReminderEmailText(t,l,u),html:this.getReminderEmailHTML(t,l,u)};return await et.send(h),console.log("Appointment reminder sent successfully to:",u.email),{success:!0,message:"Appointment reminder sent"}}catch(h){return console.error("Error sending appointment reminder:",h),{success:!1,message:h.message}}}generateICSFile(t,l,u){const h=Hi({domain:"mindbridge.com",name:"MindBridge Appointments",timezone:"America/New_York"}),E=new Date(t.appointmentDate),T=new Date(E.getTime()+(t.duration||60)*6e4);return h.createEvent({start:E,end:T,summary:`Counselling Session with ${l.name}`,description:`Mental health counselling session with ${l.name}

Session Type: ${t.sessionType||"Video Call"}

MindBridge Platform`,location:t.sessionType==="in-person"?l.address:"Online Video Call",organizer:{name:l.name,email:l.email||Qe},attendees:[{name:u.displayName||u.email,email:u.email,rsvp:!0}]}),h.toString()}getWelcomeEmailText(t,l){return`
Welcome to MindBridge, ${t}!

Thank you for joining our mental health support platform. We're excited to have you as part of our community.

${{youth:"As a youth user, you can access mental health resources, book counselling sessions, and connect with professional support.",counsellor:"As a counsellor, you can manage your profile, set availability, and help young people on their mental health journey.",admin:"As an admin, you have access to platform management tools and user oversight capabilities."}[l]||"Welcome to our platform!"}

Getting Started:
- Complete your profile to get the most out of MindBridge
- Explore our mental health resources
- Connect with our supportive community

If you have any questions, our support team is here to help.

Best regards,
The MindBridge Team

---
This email was sent to you because you registered for a MindBridge account.
If you didn't create this account, please contact our support team.
    `.trim()}getWelcomeEmailHTML(t,l){return`
<!DOCTYPE html>
<html>
<head>
  <style>
    body { font-family: Arial, sans-serif; line-height: 1.6; color: #333; }
    .container { max-width: 600px; margin: 0 auto; padding: 20px; }
    .header { background: #26a69a; color: white; padding: 20px; text-align: center; }
    .content { padding: 20px; background: #f9f9f9; }
    .footer { padding: 20px; text-align: center; font-size: 12px; color: #666; }
    .btn { background: #26a69a; color: white; padding: 12px 24px; text-decoration: none; border-radius: 4px; display: inline-block; margin: 10px 0; }
  </style>
</head>
<body>
  <div class="container">
    <div class="header">
      <h1>Welcome to MindBridge!</h1>
    </div>
    <div class="content">
      <h2>Hello ${t},</h2>
      <p>Thank you for joining our mental health support platform. We're excited to have you as part of our community.</p>
      
      <p>${{youth:"As a youth user, you can access mental health resources, book counselling sessions, and connect with professional support.",counsellor:"As a counsellor, you can manage your profile, set availability, and help young people on their mental health journey.",admin:"As an admin, you have access to platform management tools and user oversight capabilities."}[l]||"Welcome to our platform!"}</p>
      
      <h3>Getting Started:</h3>
      <ul>
        <li>Complete your profile to get the most out of MindBridge</li>
        <li>Explore our mental health resources</li>
        <li>Connect with our supportive community</li>
      </ul>
      
      <p>If you have any questions, our support team is here to help.</p>
      
      <p>Best regards,<br>The MindBridge Team</p>
    </div>
    <div class="footer">
      <p>This email was sent to you because you registered for a MindBridge account.</p>
      <p>If you didn't create this account, please contact our support team.</p>
    </div>
  </div>
</body>
</html>
    `.trim()}getAppointmentEmailText(t,l,u){return`
Appointment Confirmed!

Hello ${u.displayName||u.email},

Your counselling appointment has been confirmed with the following details:

Counsellor: ${l.name}
Date: ${this.formatDate(t.appointmentDate)}
Time: ${this.formatTime(t.appointmentDate)}
Duration: ${t.duration||60} minutes
Session Type: ${t.sessionType||"Video Call"}

${t.sessionType==="in-person"?`Location: ${l.address||"Address will be provided separately"}`:"Join Link: A video call link will be sent closer to your appointment time."}

Please save the attached calendar file (.ics) to add this appointment to your calendar.

If you need to reschedule or cancel, please contact us at least 24 hours in advance.

Best regards,
The MindBridge Team
    `.trim()}getAppointmentEmailHTML(t,l,u){return`
<!DOCTYPE html>
<html>
<head>
  <style>
    body { font-family: Arial, sans-serif; line-height: 1.6; color: #333; }
    .container { max-width: 600px; margin: 0 auto; padding: 20px; }
    .header { background: #26a69a; color: white; padding: 20px; text-align: center; }
    .content { padding: 20px; background: #f9f9f9; }
    .appointment-details { background: white; padding: 15px; border-radius: 5px; margin: 15px 0; }
    .footer { padding: 20px; text-align: center; font-size: 12px; color: #666; }
  </style>
</head>
<body>
  <div class="container">
    <div class="header">
      <h1>Appointment Confirmed!</h1>
    </div>
    <div class="content">
      <h2>Hello ${u.displayName||u.email},</h2>
      <p>Your counselling appointment has been confirmed with the following details:</p>
      
      <div class="appointment-details">
        <h3>Appointment Details</h3>
        <p><strong>Counsellor:</strong> ${l.name}</p>
        <p><strong>Date:</strong> ${this.formatDate(t.appointmentDate)}</p>
        <p><strong>Time:</strong> ${this.formatTime(t.appointmentDate)}</p>
        <p><strong>Duration:</strong> ${t.duration||60} minutes</p>
        <p><strong>Session Type:</strong> ${t.sessionType||"Video Call"}</p>
        ${t.sessionType==="in-person"?`<p><strong>Location:</strong> ${l.address||"Address will be provided separately"}</p>`:"<p><strong>Join Link:</strong> A video call link will be sent closer to your appointment time.</p>"}
      </div>
      
      <p>Please save the attached calendar file (.ics) to add this appointment to your calendar.</p>
      <p>If you need to reschedule or cancel, please contact us at least 24 hours in advance.</p>
      
      <p>Best regards,<br>The MindBridge Team</p>
    </div>
    <div class="footer">
      <p>MindBridge - Your Mental Health Support Platform</p>
    </div>
  </div>
</body>
</html>
    `.trim()}getReminderEmailText(t,l,u){return`
Appointment Reminder

Hello ${u.displayName||u.email},

This is a friendly reminder about your upcoming counselling appointment:

Counsellor: ${l.name}
Date: ${this.formatDate(t.appointmentDate)}
Time: ${this.formatTime(t.appointmentDate)}

Please make sure you're prepared for your session. If you need to reschedule, please contact us as soon as possible.

Best regards,
The MindBridge Team
    `.trim()}getReminderEmailHTML(t,l,u){return`
<!DOCTYPE html>
<html>
<head>
  <style>
    body { font-family: Arial, sans-serif; line-height: 1.6; color: #333; }
    .container { max-width: 600px; margin: 0 auto; padding: 20px; }
    .header { background: #ff9800; color: white; padding: 20px; text-align: center; }
    .content { padding: 20px; background: #f9f9f9; }
    .reminder-details { background: white; padding: 15px; border-radius: 5px; margin: 15px 0; border-left: 4px solid #ff9800; }
  </style>
</head>
<body>
  <div class="container">
    <div class="header">
      <h1>Appointment Reminder</h1>
    </div>
    <div class="content">
      <h2>Hello ${u.displayName||u.email},</h2>
      <p>This is a friendly reminder about your upcoming counselling appointment:</p>
      
      <div class="reminder-details">
        <p><strong>Counsellor:</strong> ${l.name}</p>
        <p><strong>Date:</strong> ${this.formatDate(t.appointmentDate)}</p>
        <p><strong>Time:</strong> ${this.formatTime(t.appointmentDate)}</p>
      </div>
      
      <p>Please make sure you're prepared for your session. If you need to reschedule, please contact us as soon as possible.</p>
      
      <p>Best regards,<br>The MindBridge Team</p>
    </div>
  </div>
</body>
</html>
    `.trim()}formatDate(t){return new Date(t).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})}formatTime(t){return new Date(t).toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0})}}const ve=new Wi,Vi=()=>{const e=Te(!1),t=Te(null);return{loading:e,error:t,sendWelcomeEmail:async(f,c)=>{e.value=!0,t.value=null;try{console.log("Sending welcome email to:",f.email);const b=await ve.sendWelcomeEmail(f.email,f.displayName||f.email.split("@")[0],c);if(b.success)return console.log("Welcome email sent successfully"),{success:!0,message:"Welcome email sent"};throw new Error(b.message)}catch(b){return console.error("Error sending welcome email:",b),t.value=b.message,{success:!1,message:b.message}}finally{e.value=!1}},sendAppointmentConfirmation:async(f,c)=>{e.value=!0,t.value=null;try{console.log("Sending appointment confirmation for:",f);const b=await Ye(Je(Ge,Ke.COUNSELLOR_PROFILES,c.counsellorId));if(!b.exists())throw new Error("Counsellor not found");const I=b.data(),o=await Ye(Je(Ge,Ke.USERS,c.userId));if(!o.exists())throw new Error("User not found");const g=o.data(),v=await ve.sendAppointmentConfirmation(c,{name:I.name,email:I.email,address:I.address},{displayName:g.displayName,email:g.email});if(v.success)return console.log("Appointment confirmation sent successfully"),{success:!0,message:"Appointment confirmation sent"};throw new Error(v.message)}catch(b){return console.error("Error sending appointment confirmation:",b),t.value=b.message,{success:!1,message:b.message}}finally{e.value=!1}},sendAppointmentReminder:async(f,c)=>{e.value=!0,t.value=null;try{console.log("Sending appointment reminder for:",f);const b=await Ye(Je(Ge,Ke.COUNSELLOR_PROFILES,c.counsellorId));if(!b.exists())throw new Error("Counsellor not found");const I=b.data(),o=await Ye(Je(Ge,Ke.USERS,c.userId));if(!o.exists())throw new Error("User not found");const g=o.data(),v=await ve.sendAppointmentReminder(c,{name:I.name,email:I.email},{displayName:g.displayName,email:g.email});if(v.success)return console.log("Appointment reminder sent successfully"),{success:!0,message:"Appointment reminder sent"};throw new Error(v.message)}catch(b){return console.error("Error sending appointment reminder:",b),t.value=b.message,{success:!1,message:b.message}}finally{e.value=!1}},testEmailService:async(f="test@example.com")=>{e.value=!0,t.value=null;try{console.log("Testing email service with:",f);const c=await ve.sendWelcomeEmail(f,"Test User","youth");if(c.success)return console.log("Test email sent successfully"),{success:!0,message:"Test email sent successfully"};throw new Error(c.message)}catch(c){return console.error("Error testing email service:",c),t.value=c.message,{success:!1,message:c.message}}finally{e.value=!1}},sendBulkEmails:async(f,c,b={})=>{e.value=!0,t.value=null;try{console.log(`Sending bulk ${c} emails to ${f.length} recipients`);const I=[];for(const v of f){try{let x;switch(c){case"welcome":x=await ve.sendWelcomeEmail(v.email,v.name,v.role);break;case"reminder":x=await ve.sendAppointmentReminder(v.appointment,v.counsellorInfo,v.userInfo);break;default:throw new Error(`Unknown email type: ${c}`)}I.push({email:v.email,success:x.success,message:x.message})}catch(x){I.push({email:v.email,success:!1,message:x.message})}await new Promise(x=>setTimeout(x,100))}const o=I.filter(v=>v.success).length,g=I.length-o;return console.log(`Bulk email results: ${o} sent, ${g} failed`),{success:!0,message:`Bulk emails completed: ${o} sent, ${g} failed`,results:I}}catch(I){return console.error("Error sending bulk emails:",I),t.value=I.message,{success:!1,message:I.message}}finally{e.value=!1}}}},Yi={class:"email-management"},Ji={class:"container"},Gi={class:"row"},Ki={class:"col s12 m6"},Xi={class:"card"},Zi={class:"card-content"},Qi={class:"input-field"},ea=["disabled"],ta=["disabled"],ra={__name:"EmailManagement",setup(e){const t=Te(""),l=Te(!1),u=Te(""),h=Te("success"),{testEmailService:E}=Vi(),T=async()=>{if(t.value){l.value=!0,u.value="";try{const c=await E(t.value);c.success?(f("Test email sent successfully!","success"),t.value=""):f("Failed to send test email: "+c.message,"error")}catch(c){f("Error sending test email: "+c.message,"error")}finally{l.value=!1}}},f=(c,b)=>{u.value=c,h.value=b,setTimeout(()=>{u.value=""},5e3)};return ni(()=>{setTimeout(()=>{window.M&&window.M.updateTextFields()},100)}),(c,b)=>(Gr(),Wr("div",Yi,[J("div",Ji,[b[5]||(b[5]=J("h4",{class:"center-align"},"Essential Email System",-1)),J("div",Gi,[b[4]||(b[4]=Vr('<div class="col s12 m6" data-v-94a8ba15><div class="card" data-v-94a8ba15><div class="card-content" data-v-94a8ba15><span class="card-title" data-v-94a8ba15>Email Configuration</span><div class="collection" data-v-94a8ba15><div class="collection-item" data-v-94a8ba15><span class="title" data-v-94a8ba15>SendGrid API</span><span class="secondary-content" data-v-94a8ba15><span class="chip green white-text" data-v-94a8ba15>Active</span></span></div><div class="collection-item" data-v-94a8ba15><span class="title" data-v-94a8ba15>Sender Email</span><span class="secondary-content" data-v-94a8ba15>varunveerbadra@gmail.com</span></div><div class="collection-item" data-v-94a8ba15><span class="title" data-v-94a8ba15>Automated Emails</span><span class="secondary-content" data-v-94a8ba15><span class="chip blue white-text" data-v-94a8ba15>Enabled</span></span></div></div></div></div></div>',1)),J("div",Ki,[J("div",Xi,[J("div",Zi,[b[3]||(b[3]=J("span",{class:"card-title"},"Test Email System",-1)),J("div",Qi,[ai(J("input",{id:"test-email",type:"email","onUpdate:modelValue":b[0]||(b[0]=I=>t.value=I),disabled:l.value},null,8,ea),[[oi,t.value]]),b[1]||(b[1]=J("label",{for:"test-email"},"Test Email Address",-1))]),J("button",{class:"btn waves-effect waves-light",onClick:T,disabled:l.value||!t.value},[b[2]||(b[2]=J("i",{class:"material-icons left"},"send",-1)),li(" "+Yr(l.value?"Sending...":"Send Test Email"),1)],8,ta)])])])]),b[6]||(b[6]=Vr('<div class="row" data-v-94a8ba15><div class="col s12" data-v-94a8ba15><div class="card" data-v-94a8ba15><div class="card-content" data-v-94a8ba15><span class="card-title" data-v-94a8ba15>Automated Email Types</span><div class="collection" data-v-94a8ba15><div class="collection-item" data-v-94a8ba15><div class="row" data-v-94a8ba15><div class="col s8" data-v-94a8ba15><span class="title" data-v-94a8ba15>Welcome Emails</span><p class="grey-text" data-v-94a8ba15>Sent automatically when users register</p></div><div class="col s4 right-align" data-v-94a8ba15><span class="chip green white-text" data-v-94a8ba15>Active</span></div></div></div><div class="collection-item" data-v-94a8ba15><div class="row" data-v-94a8ba15><div class="col s8" data-v-94a8ba15><span class="title" data-v-94a8ba15>Appointment Confirmations</span><p class="grey-text" data-v-94a8ba15>Sent when appointments are booked</p></div><div class="col s4 right-align" data-v-94a8ba15><span class="chip green white-text" data-v-94a8ba15>Active</span></div></div></div></div></div></div></div></div>',1)),u.value?(Gr(),Wr("div",{key:0,class:Jr(["card-panel",h.value==="success"?"green lighten-4":"red lighten-4"])},[J("span",{class:Jr(h.value==="success"?"green-text text-darken-2":"red-text text-darken-2")},Yr(u.value),3)],2)):ii("",!0)])]))}},ua=hi(ra,[["__scopeId","data-v-94a8ba15"]]);export{ua as default};
