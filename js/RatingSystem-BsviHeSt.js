import{r as h,q as R,c as E,a,o as n,f as r,b as t,F as c,D as u,g as w,t as d,v as C,E as P,y as g,x as z,H}from"./vendor-BmZR9K5F.js";import{d as U}from"./validation-BV3KGR2z.js";import{_ as G}from"./index-csEBr71G.js";const L={class:"rating-system"},j={key:0,class:"rating-display"},q={class:"stars-container"},O={class:"stars"},W={class:"rating-text"},J={class:"grey-text"},K={key:0,class:"rating-breakdown"},Q={class:"rating-label"},X={class:"progress-container"},Y={class:"progress"},Z={class:"rating-count"},tt={key:1,class:"rating-input"},et={class:"stars-container"},st={class:"stars interactive"},at=["onClick","onMouseover"],nt={class:"rating-text"},it={key:0,class:"category-ratings"},lt={class:"category-rating"},ot={class:"stars interactive small"},rt=["onClick"],ct={class:"category-rating"},ut={class:"stars interactive small"},dt=["onClick"],mt={class:"category-rating"},vt={class:"stars interactive small"},gt=["onClick"],yt={class:"input-field"},pt={key:0,class:"helper-text error-text"},ft=["disabled"],ht={key:0},kt={key:1},xt={key:2,class:"reviews-list"},_t={key:0,class:"center-align"},bt={class:"review-header"},wt={class:"stars small"},Rt={class:"reviewer-name"},Ct={class:"review-date grey-text"},St={key:0,class:"review-text"},Bt={key:1,class:"category-display"},It={key:0,class:"category-item"},Dt={class:"stars tiny inline"},Nt={key:1,class:"category-item"},At={class:"stars tiny inline"},Vt={key:2,class:"category-item"},$t={class:"stars tiny inline"},Ft={__name:"RatingSystem",props:{mode:{type:String,default:"display",validator:o=>["display","input","reviews"].includes(o)},averageRating:{type:Number,default:0},totalRatings:{type:Number,default:0},ratingBreakdown:{type:Object,default:()=>({})},showBreakdown:{type:Boolean,default:!1},showCategories:{type:Boolean,default:!1},reviews:{type:Array,default:()=>[]},counsellorId:{type:String,default:""},appointmentId:{type:String,default:""}},emits:["rating-submitted"],setup(o,{emit:S}){const p=o,B=S,v=h(0),_=h(0),y=h(""),k=h(!1),x=h(!1),m=R({communication:0,helpfulness:0,professionalism:0}),f=R({review:null}),I=E(()=>_.value||v.value),D=i=>i<=p.averageRating?"amber-text":"grey-text text-lighten-2",N=i=>i<=I.value?"amber-text":"grey-text text-lighten-2",A=i=>{v.value=i},b=(i,s)=>{m[i]=s},V=i=>({1:"Poor",2:"Fair",3:"Good",4:"Very Good",5:"Excellent"})[i]||"",$=i=>p.totalRatings===0?0:i/p.totalRatings*100,F=()=>(f.review=y.value?U(y.value,1,500):null,!f.review),M=async()=>{if(F())try{x.value=!0;const i={rating:v.value,review:y.value,communication:m.communication||null,helpfulness:m.helpfulness||null,professionalism:m.professionalism||null,isAnonymous:k.value,counsellorId:p.counsellorId,appointmentId:p.appointmentId};B("rating-submitted",i),v.value=0,y.value="",k.value=!1,m.communication=0,m.helpfulness=0,m.professionalism=0}catch(i){console.error("Error submitting rating:",i)}finally{x.value=!1}},T=i=>i?new Date(i).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"";return(i,s)=>(n(),a("div",L,[o.mode==="display"?(n(),a("div",j,[t("div",q,[t("div",O,[(n(),a(c,null,u(5,e=>t("i",{key:e,class:g(["material-icons star",D(e)])}," star ",2)),64))]),t("span",W,[w(d(o.averageRating.toFixed(1))+" ",1),t("span",J,"("+d(o.totalRatings)+" "+d(o.totalRatings===1?"review":"reviews")+")",1)])]),o.showBreakdown&&o.ratingBreakdown?(n(),a("div",K,[(n(!0),a(c,null,u(o.ratingBreakdown,(e,l)=>(n(),a("div",{key:l,class:"rating-bar"},[t("span",Q,d(l)+" star"+d(l>1?"s":""),1),t("div",X,[t("div",Y,[t("div",{class:"determinate teal",style:H({width:$(e)+"%"})},null,4)])]),t("span",Z,d(e),1)]))),128))])):r("",!0)])):o.mode==="input"?(n(),a("div",tt,[s[10]||(s[10]=t("h6",null,"Rate this counsellor",-1)),t("div",et,[t("div",st,[(n(),a(c,null,u(5,e=>t("i",{key:e,class:g(["material-icons star clickable",N(e)]),onClick:l=>A(e),onMouseover:l=>_.value=e,onMouseleave:s[0]||(s[0]=l=>_.value=0)}," star ",42,at)),64))]),t("span",nt,d(v.value>0?V(v.value):"Click to rate"),1)]),o.showCategories?(n(),a("div",it,[t("div",lt,[s[3]||(s[3]=t("label",null,"Communication",-1)),t("div",ot,[(n(),a(c,null,u(5,e=>t("i",{key:e,class:g(["material-icons star clickable",e<=m.communication?"amber-text":"grey-text text-lighten-2"]),onClick:l=>b("communication",e)}," star ",10,rt)),64))])]),t("div",ct,[s[4]||(s[4]=t("label",null,"Helpfulness",-1)),t("div",ut,[(n(),a(c,null,u(5,e=>t("i",{key:e,class:g(["material-icons star clickable",e<=m.helpfulness?"amber-text":"grey-text text-lighten-2"]),onClick:l=>b("helpfulness",e)}," star ",10,dt)),64))])]),t("div",mt,[s[5]||(s[5]=t("label",null,"Professionalism",-1)),t("div",vt,[(n(),a(c,null,u(5,e=>t("i",{key:e,class:g(["material-icons star clickable",e<=m.professionalism?"amber-text":"grey-text text-lighten-2"]),onClick:l=>b("professionalism",e)}," star ",10,gt)),64))])])])):r("",!0),t("div",yt,[C(t("textarea",{id:"review-text",class:g(["materialize-textarea",{invalid:f.review}]),"onUpdate:modelValue":s[1]||(s[1]=e=>y.value=e)},null,2),[[P,y.value]]),s[6]||(s[6]=t("label",{for:"review-text"},"Write a review (optional)",-1)),f.review?(n(),a("span",pt,d(f.review),1)):r("",!0)]),t("p",null,[t("label",null,[C(t("input",{type:"checkbox","onUpdate:modelValue":s[2]||(s[2]=e=>k.value=e)},null,512),[[z,k.value]]),s[7]||(s[7]=t("span",null,"Submit anonymously",-1))])]),t("button",{onClick:M,class:"btn waves-effect waves-light teal",disabled:v.value===0||x.value},[x.value?(n(),a("span",ht,[...s[8]||(s[8]=[t("i",{class:"material-icons left"},"hourglass_empty",-1),w(" Submitting... ",-1)])])):(n(),a("span",kt,[...s[9]||(s[9]=[t("i",{class:"material-icons left"},"star",-1),w(" Submit Rating ",-1)])]))],8,ft)])):r("",!0),o.mode==="reviews"?(n(),a("div",xt,[s[15]||(s[15]=t("h6",null,"Reviews",-1)),o.reviews.length===0?(n(),a("div",_t,[...s[11]||(s[11]=[t("i",{class:"material-icons large grey-text"},"rate_review",-1),t("p",{class:"grey-text"},"No reviews yet.",-1)])])):r("",!0),(n(!0),a(c,null,u(o.reviews,e=>(n(),a("div",{key:e.id,class:"review-item card-panel"},[t("div",bt,[t("div",wt,[(n(),a(c,null,u(5,l=>t("i",{key:l,class:g(["material-icons star",l<=e.rating?"amber-text":"grey-text text-lighten-2"])}," star ",2)),64))]),t("span",Rt,d(e.isAnonymous?"Anonymous":e.reviewerName),1),t("span",Ct,d(T(e.createdAt)),1)]),e.review?(n(),a("p",St,d(e.review),1)):r("",!0),e.communication||e.helpfulness||e.professionalism?(n(),a("div",Bt,[e.communication?(n(),a("div",It,[s[12]||(s[12]=t("span",{class:"category-label"},"Communication:",-1)),t("div",Dt,[(n(!0),a(c,null,u(e.communication,l=>(n(),a("i",{key:l,class:"material-icons star amber-text"}," star "))),128))])])):r("",!0),e.helpfulness?(n(),a("div",Nt,[s[13]||(s[13]=t("span",{class:"category-label"},"Helpfulness:",-1)),t("div",At,[(n(!0),a(c,null,u(e.helpfulness,l=>(n(),a("i",{key:l,class:"material-icons star amber-text"}," star "))),128))])])):r("",!0),e.professionalism?(n(),a("div",Vt,[s[14]||(s[14]=t("span",{class:"category-label"},"Professionalism:",-1)),t("div",$t,[(n(!0),a(c,null,u(e.professionalism,l=>(n(),a("i",{key:l,class:"material-icons star amber-text"}," star "))),128))])])):r("",!0)])):r("",!0)]))),128))])):r("",!0)]))}},Pt=G(Ft,[["__scopeId","data-v-d5fa0bed"]]);export{Pt as R};
