import{q as E,c as T,j as S,p as U,w as x,u as d,h as N,e as j,o as F,b as r,a as h,f as C,d as p,v as k,y as B,z as I,t as R,x as Y,g as v}from"./vendor-BmZR9K5F.js";import{_ as z,u as O,a as J,d as $}from"./index-csEBr71G.js";import{b as A,c as D}from"./validation-BV3KGR2z.js";import{F as G,a as y}from"./FormField-CCZ-JULi.js";import"./firebase-w6XYyoFK.js";import"./mapbox-Dy2hBtBs.js";const H=(m,u)=>{const i=E({}),c=(o,t=null)=>{const e=t!==null?t:m[o],l=u[o];if(!l)return i[o]=null,!0;if(Array.isArray(l))for(const a of l){const _=b(a,e,o);if(_)return i[o]=_,!1}else{const a=b(l,e,o);if(a)return i[o]=a,!1}return i[o]=null,!0},b=(o,t,e)=>{if(typeof o=="function")return o(t,e,m);if(typeof o=="object"){const{validator:l,message:a,..._}=o,q=typeof l=="string"?A[l]:l;if(typeof l=="function"){const g=q(t,e,m);return g?a||g:null}else{const g=q(t,e);return g?a||g:null}}if(typeof o=="string"){const l=A[o];return l?l(t,e):null}return null},w=()=>{let o=!0;for(const t in u)c(t)||(o=!1);return o},s=()=>{for(const o in i)i[o]=null},n=o=>{i[o]=null},V=T(()=>Object.values(i).some(o=>o!==null)),P=T(()=>{for(const o of Object.values(i))if(o)return o;return null});return{errors:i,validateField:c,validateForm:w,clearErrors:s,clearFieldError:n,hasErrors:V,firstError:P}},f={email:[{validator:"validateRequired",message:"Email is required"},{validator:"validateEmail",message:"Please enter a valid email address"}],password:[{validator:"validateRequired",message:"Password is required"},{validator:"validatePassword",message:"Password must be at least 6 characters long"}],confirmPassword:(m="password")=>[{validator:"validateRequired",message:"Please confirm your password"},{validator:(u,i,c)=>D(c[m],u),message:"Passwords do not match"}],required:m=>[{validator:"validateRequired",message:`${m} is required`}],name:[{validator:"validateRequired",message:"Name is required"},{validator:"validateName",message:"Please enter a valid name"}],age:[{validator:"validateRequired",message:"Age is required"},{validator:"validateAge",message:"Please enter a valid age"}]},K={class:"row"},L={class:"col s12 m6"},Q={class:"col s12 m6"},W={class:"row"},X={class:"col s12 m6"},Z={class:"col s12 m6"},ee={class:"row"},oe={class:"col s12 m6"},re={class:"col s12 m6"},se={class:"field-container"},ae={key:0,class:"helper-text validation-error"},te={class:"terms-section"},le={key:0,class:"validation-error"},ie={__name:"Register",setup(m){const u=N(),{register:i,loading:c,error:b,clearError:w}=O(),s=E({displayName:"",email:"",password:"",confirmPassword:"",age:"",role:"",agreeToTerms:!1}),{errors:n,validateForm:V}=H(s,{displayName:f.name,email:f.email,password:f.password,confirmPassword:f.confirmPassword("password"),age:f.age,role:f.required("Role"),agreeToTerms:[{validator:t=>t?null:"You must accept the terms and conditions to proceed",message:"You must accept the terms and conditions to proceed"}]}),P=async()=>{try{alert(J&&$?"Firebase connection verified successfully.":"Firebase connection verification failed.")}catch{alert("Firebase connection verification failed.")}},o=async()=>{if(w(),!!V())try{const t={displayName:s.displayName,age:parseInt(s.age),role:s.role},e=await i(s.email,s.password,t);u.push("/dashboard")}catch{}};return S(()=>{typeof M<"u"&&setTimeout(()=>{M.FormSelect.init(document.querySelectorAll("select")),M.updateTextFields(),M.CharacterCounter.init(document.querySelectorAll("input[data-length]"))},150)}),(t,e)=>{const l=j("router-link");return F(),U(G,{"card-title":"Join MindBridge","card-subheading":"Create your account to begin your journey","header-icon":"person_add","system-notification":d(b),"operation-active":d(c),"submit-label":"Create Account","submit-icon-symbol":"person_add","loading-label":"Setting up account...",onSubmit:o},{footer:x(()=>[r("p",null,[e[13]||(e[13]=v(" Already have an account? ",-1)),p(l,{to:"/login",class:"teal-text"},{default:x(()=>[...e[12]||(e[12]=[v("Sign in here",-1)])]),_:1})])]),default:x(()=>[r("div",K,[r("div",L,[p(y,{"element-identifier":"displayName","label-text":"Full Name","icon-symbol":"person",modelValue:s.displayName,"onUpdate:modelValue":e[0]||(e[0]=a=>s.displayName=a),"error-message":d(n).displayName,"mandatory-field":""},null,8,["modelValue","error-message"])]),r("div",Q,[p(y,{"element-identifier":"email","label-text":"Email Address","input-category":"email","icon-symbol":"email",modelValue:s.email,"onUpdate:modelValue":e[1]||(e[1]=a=>s.email=a),"error-message":d(n).email,"mandatory-field":""},null,8,["modelValue","error-message"])])]),r("div",W,[r("div",X,[p(y,{"element-identifier":"password","label-text":"Password","input-category":"password","icon-symbol":"lock",modelValue:s.password,"onUpdate:modelValue":e[2]||(e[2]=a=>s.password=a),"error-message":d(n).password,"mandatory-field":""},null,8,["modelValue","error-message"])]),r("div",Z,[p(y,{"element-identifier":"confirmPassword","label-text":"Confirm Password","input-category":"password","icon-symbol":"lock_outline",modelValue:s.confirmPassword,"onUpdate:modelValue":e[3]||(e[3]=a=>s.confirmPassword=a),"error-message":d(n).confirmPassword,"mandatory-field":""},null,8,["modelValue","error-message"])])]),r("div",ee,[r("div",oe,[p(y,{"element-identifier":"age","label-text":"Age","input-category":"number","icon-symbol":"cake",modelValue:s.age,"onUpdate:modelValue":e[4]||(e[4]=a=>s.age=a),"error-message":d(n).age,"mandatory-field":""},null,8,["modelValue","error-message"])]),r("div",re,[r("div",se,[e[8]||(e[8]=r("i",{class:"material-icons field-prefix"},"assignment_ind",-1)),k(r("select",{"onUpdate:modelValue":e[5]||(e[5]=a=>s.role=a),class:B({invalid:d(n).role}),required:""},[...e[7]||(e[7]=[r("option",{value:"",disabled:""},"Select your role",-1),r("option",{value:"youth"},"Youth User",-1),r("option",{value:"counsellor"},"Counsellor",-1)])],2),[[I,s.role]]),e[9]||(e[9]=r("label",null,"Account Type",-1)),d(n).role?(F(),h("span",ae,R(d(n).role),1)):C("",!0)])])]),r("p",te,[r("label",null,[k(r("input",{type:"checkbox","onUpdate:modelValue":e[6]||(e[6]=a=>s.agreeToTerms=a)},null,512),[[Y,s.agreeToTerms]]),e[10]||(e[10]=r("span",null,[v(" I accept the "),r("a",{href:"#",class:"teal-text"},"Terms of Service"),v(" and "),r("a",{href:"#",class:"teal-text"},"Privacy Policy")],-1))])]),d(n).agreeToTerms?(F(),h("span",le,R(d(n).agreeToTerms),1)):C("",!0),r("div",{class:"center-align",style:{"margin-bottom":"1rem"}},[r("button",{onClick:P,type:"button",class:"btn waves-effect waves-light blue"},[...e[11]||(e[11]=[r("i",{class:"material-icons left"},"cloud_done",-1),v(" Verify Connection ",-1)])])])]),_:1},8,["system-notification","operation-active"])}}},fe=z(ie,[["__scopeId","data-v-0e841233"]]);export{fe as default};
